(this["webpackJsonppayference-fe"]=this["webpackJsonppayference-fe"]||[]).push([[16],{499:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(506);t.a=function(e){var t=e.isfullscreen;return l.a.createElement("div",{className:"card-body w-100 text-center pt-5 mt-5 ".concat(t&&"vh-100")},l.a.createElement(r.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading...")))}},501:function(e,t,a){"use strict";var n=a(155),l=a(0),r=a.n(l);t.a=function(e){var t=e.payload.value,a=(e.verticalAnchor,e.visibleTicksCount,Object(n.a)(e,["payload","verticalAnchor","visibleTicksCount"]));return r.a.createElement("text",Object.assign({},a,{style:{fontSize:"0.8rem"},className:"bar-chart-tick",dy:12}),t)}},574:function(e,t,a){"use strict";var n=a(4),l=a.n(n),r=a(0),c=a.n(r),o=a(5),i=a.n(o),s=a(145),u=a(58);t.a=function(e){var t=e.status,a=void 0===t?"":t,n=e.total_amount_due,r=void 0===n?0:n,o=e.invoice_amount,m=void 0===o?0:o,d=e.recommendation,p=void 0===d?"":d,f=e.supplier,h=e.customer,E=(e.currency,e.insights),g=void 0===E?"":E,y=e.expected_date,b=void 0===y?"":y,v=e.type,w=void 0===v?"":v,k=e.date_closed,C="all"===a?"".concat(window.location.origin,"/").concat(w,"/").concat("customers"===w?l()(h,"id",""):l()(f,"id",""),"#reports"):"",N=i()("card",{critical:"PAY_IMMEDIATELY"===g},{average:"INVALID_DUE_DATE"===g},{"cursor-pointer":"all"===a});return c.a.createElement("div",{className:N,onClick:function(){return"all"===a?window.open(C,"_blank"):{}}},c.a.createElement("p",{className:"mData"},c.a.createElement("span",{className:"company_name",title:l()(f,"name","")||l()(h,"name","")},l()(f,"name","")||l()(h,"name","")),c.a.createElement("span",{className:"pull-right"},a?Object(u.f)(m):Object(u.f)(r))),c.a.createElement("p",{className:"smData"},"PAY_IMMEDIATELY"===g?"Pay Immediately":Object(s.b)(k||p||b)))}},751:function(e,t,a){},771:function(e,t,a){"use strict";a.r(t);var n=a(9),l=a(42),r=a(3),c=a(14),o=a(15),i=a(17),s=a(16),u=a(43),m=a(18),d=a(0),p=a.n(d),f=a(4),h=a.n(f),E=a(551),g=a.n(E),y=a(68),b=a.n(y),v=a(153),w=a.n(v),k=a(21),C=a.n(k),N=a(12),x=a(579),O=a(496),D=a(30),I=a(568),S=a(13),_=a(499),j=a(10),M=a(231),P=a(74),T=a(25),F=a(58),Y=a(73),L=a(93),B=a(746),A=a.n(B),R=a(39),V=a(773),q=a(614),Z=a.n(q),z=a(69),W=a(489),U=a(6),H=a(11),K=(a(747),function(e){var t,a,n;a=atob(e.split(",")[1]);var l=e.match(/(:)([a-z\/]+)(;)/)[2];for(t=[],n=0;n<a.length;)t.push(a.charCodeAt(n)),n++;return new Blob([new Uint8Array(t)],{type:l})}),$=function(e){function t(){var e,a;Object(c.a)(this,t);for(var l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={showExport:!1,shareReport:!1,emailTo:[],emailBody:"",searchList:[],usersList:[],isGeneratingReport:!0},a.getUsersList=function(){U.c.get("client/user").then((function(e){a.setState({usersList:e.data.result.map((function(e){return{name:e.name||e.email,email:e.email}}))})})).catch((function(e){return Object(j.a)(e)}))},a.toggleExport=function(e){a.setState({showExport:e})},a.tableToExcel=function(){var e="reports".concat(C()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),t=Y.utils.table_to_book(document.getElementById("exportexceltable")),n=Y.write(t,{bookType:"xlsx",type:"array"}),l=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});L.saveAs(l,e),a.setState({showExport:!1})},a.onEmailSave=function(e){if(e){var t=a.state,n=t.emailBody,l=t.emailTo,r=H.a.getUserEmail(),c="<p>".concat(r," shared a Payference report with you.</p><p>").concat(n,'</p> <br/> <a style="text-decoration:none" href="').concat(window.location.origin,'/reports" target="_blank"><span style="padding: 15px;background-color: #007bff; color: #ffffff;border-radius: 5px;display: inline-block; font-size:14px; line-height:16px;">View Report</span></a><br/>'),o={from:"reports@payference.com",to:l.toString(),subject:"Cashflow Report",message:c},i=new FormData;i.set("metadata",JSON.stringify(o)),i.append("files[]",K(e),"report-".concat(C()().format("MM-DD-YYYY-hh-mm"),".pdf")),U.b.post("sendemail",i).then((function(){Object(S.a)("Report shared","success"),a.toggleShare(!1)})).catch((function(e){return Object(j.a)(e)}))}},a.generatePDF=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=new Z.a;a.setState({isGeneratingReport:!0}),t&&(Object(S.a)("Sharing your report, please wait.","success"),document.getElementById("share-report").click()),A()(document.getElementById("exportgraph")).then((function(c){l.text(10,10,"".concat("weekly"===e?"Weekly":"Monthly"," Cash Flow As of ").concat(C()().format("MMM DD, YYYY"))),l.addImage(c.toDataURL(),"JPEG",5,20,l.internal.pageSize.width-10,100),l.addPage();var o=document.getElementById("exportexceltable").rows[0].cells.length,i={html:"#exportexceltable",theme:"grid",margin:5,styles:{fontSize:7,halign:"right"},columnStyles:Object(n.a)({0:{halign:"left"}},"weekly"===e?5:2,{fillColor:[236,236,236]}),rowPageBreak:"avoid",headStyles:{valign:"middle",halign:"center"}};if(o<=10)l.autoTable(Object(r.a)({},i));else for(var s=Math.ceil(o/10),u=0;u<s;u++){var m="hide".concat(u);document.getElementById("exportexceltable").classList.add(m),u>0&&(i.columnStyles={0:{halign:"left"}},l.addPage()),l.autoTable(Object(r.a)({},i)),document.getElementById("exportexceltable").classList.remove(m)}t?a.onEmailSave(l.output("datauristring")):(l.save("report-".concat(C()().format("MM-DD-YYYY-hh-mm"),".pdf")),a.setState({showExport:!1}))}))},a.onChange=function(e,t){return a.setState(Object(n.a)({},e,t))},a.toggleShare=function(e){return a.setState({shareReport:e},(function(){a.state.shareReport||(a.setState({emailTo:[]}),document.getElementById("share-form")&&document.getElementById("share-form").reset())}))},a.onClickAway=function(){a.toggleShare(!1),a.toggleExport(!1)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getUsersList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.emailTo,n=t.usersList,l=t.showExport,r=t.searchList,c=t.shareReport,o=this.props.reportFrequency;return p.a.createElement(R.a,{onClickAway:this.onClickAway},p.a.createElement("div",{onClick:function(){return e.toggleShare(!0)}},p.a.createElement(V.a,{id:"share-report",className:"float-right ml-2",title:"Share"},p.a.createElement("div",{style:{width:"400px"}},p.a.createElement("div",{className:"card-body"},p.a.createElement("form",{id:"share-form"},p.a.createElement("div",{id:"email-list",className:"mb-2 p-2"},a.length?p.a.createElement("div",{className:"mb-1"},a.map((function(t){return p.a.createElement("span",{className:"mr-1 mb-1"},p.a.createElement(W.a,{size:"small",label:t,onDelete:function(){return e.setState({emailTo:a.filter((function(e){return e!==t}))})},variant:"outlined"}))}))):null,p.a.createElement(z.a,{key:c,suggestions:r,getSelected:function(t){return e.setState({emailTo:a.length?a.includes(t.email)?a:a.concat(t.email):[t.email]})},search:function(t){return e.setState({searchList:n.filter((function(e){return e.email.toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase())}))})},placeholder:"Enter email or name",isLoading:!1})),p.a.createElement("textarea",{id:"message",className:"form-control",placeholder:"Add a message",onChange:function(t){return e.onChange("emailBody",t.target.value)}}),p.a.createElement("button",{type:"button",id:"send-message",onClick:function(){return e.generatePDF(o,!0)},className:"btn mt-2 btn-primary float-right"},"Send")))))),p.a.createElement("div",{className:"dropdown float-right"},p.a.createElement("span",{id:"export",className:"btn dropdown-toggle btn-primary cursor-pointer ",href:"#",role:"button",onClick:function(){return e.toggleExport(!0)}},"Export"),l?p.a.createElement("div",{className:"dropdown-menu dropdown-menu-right cursor-pointer payexpdroplist show","aria-labelledby":"dropdownMenuLink",id:""},p.a.createElement("span",{onClick:function(){return e.generatePDF(o)},style:{fontSize:12,float:"right",marginRight:"10px",cursor:"pointer"}},"Export PDF"),p.a.createElement("br",null),p.a.createElement("span",{style:{fontSize:12,float:"right",marginRight:"10px",cursor:"pointer"},onClick:this.tableToExcel},"Export Excel")):null))}}]),t}(p.a.Component),J=a(94),G=function(e){return e.length?e.map((function(e){return h()(e,"installments",[]).map((function(t){return{Vendor:e["Vendor Name"],Date:t[1]&&C()(t[1]).format("MM/DD/YYYY"),Amount:t[2]&&t[2]}}))})).flat():[{Vendor:"",Date:"",Amount:""}]},Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={showExport:!1},a.toggleExport=function(e){a.setState({showExport:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.showExport,a=Object(l.a)(h()(this.props,"exportData",[]).filter((function(e){return e.is_payment_plan})));return h()(this.props,"exportData",[]).filter((function(e){return!e.is_payment_plan})).length>0&&(a=[].concat(Object(l.a)(a),[{"Vendor Name":"",installments:[[null,null,null]]},{"Vendor Name":"Partial Payments",installments:[[null,null,null]]}],Object(l.a)(h()(this.props,"exportData",[]).filter((function(e){return!e.is_payment_plan}))))),p.a.createElement("div",{className:"dropdown text-right mb-2"},p.a.createElement("span",{className:"btn dropdown-toggle btn-primary cursor-pointer ",href:"#",role:"button",onClick:function(){return e.toggleExport(!0)}},"Export"),t?p.a.createElement(R.a,{onClickAway:this.toggleExport},p.a.createElement("div",{className:"dropdown-menu dropdown-menu-right cursor-pointer payexpdroplist ".concat(t?"show":""),"aria-labelledby":"dropdownMenuLink",id:"",onClick:function(){return e.toggleExport(!1)}},p.a.createElement(J.CSVLink,{data:G(a),filename:"reports-payment-plan-".concat(C()().format("MMMM Do YYYY-h:mm:ss-a"),".csv")},"Export CSV"),p.a.createElement("span",{style:{fontSize:12,float:"right",marginRight:"10px",cursor:"pointer"},onClick:function(){return function(e){var t="reports-payment-plan-".concat(C()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),a={Sheets:{data:Y.utils.json_to_sheet(e)},SheetNames:["data"]},n=Y.write(a,{bookType:"xlsx",type:"array"}),l=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});L.saveAs(l,t)}(G(a))}},"Export Excel"))):null)}}]),t}(p.a.Component),X=a(500),ee=a(501),te=function(e){var t=e.active,a=e.payload,n=e.label;return t&&a?p.a.createElement("div",{className:"custom-tooltip bg-light p-3"},p.a.createElement("p",null,p.a.createElement("strong",null,n)),a.map((function(e,t){return p.a.createElement("p",{key:t},e.name,": ",p.a.createElement("strong",null,"number"===typeof e.value?Object(F.f)(e.value):e.value))}))):null},ae=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data,t=void 0===e?[]:e;return p.a.createElement(X.n,{width:"100%",height:400},p.a.createElement(X.f,{height:400,data:t,margin:{top:20,right:20,bottom:20,left:20},barCategoryGap:"10",stackOffset:"sign"},p.a.createElement(X.q,{dataKey:"date",name:"Date",tick:p.a.createElement(ee.a,null)}),p.a.createElement(X.r,{tickFormatter:function(e){return Object(F.f)(e)},domain:["auto","auto"]}),p.a.createElement(X.p,{cursor:!1,content:p.a.createElement(te,null)}),p.a.createElement(X.i,null),p.a.createElement(X.c,{dataKey:"inflow",name:"Inflow",stackId:"a",fill:"#7ACB36"}),p.a.createElement(X.c,{dataKey:"outflow",name:"Outflow",stackId:"a",fill:"#ED3833"}),p.a.createElement(X.j,{type:"monotone",name:"Ending Cash Balance",stackId:"b",dataKey:"endingCashBalance",stroke:"#434348",dot:!0})))}}]),t}(d.PureComponent),ne=a(76),le=a(95),re=a.n(le),ce=a(779),oe=a(766),ie=a(574),se=(a(5),a(110)),ue=a.n(se),me=a(111),de=a.n(me),pe=a(109),fe=a.n(pe),he=a(253),Ee=a.n(he),ge=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={page:1,notes:[],hasMore:!0,editNote:"",isFetching:!0},a.debounceMethod=re()(a.loadMore.bind(Object(u.a)(a)),500),a.getNotes=function(e){var t=a.state.notes;U.c.get("client/note?page=".concat(a.state.page)).then((function(n){a.setState({notes:e?t.concat(n.data.result):n.data.result,isFetching:!1,hasMore:n.data.result.length>=20})})).catch((function(e){return Object(j.a)(e)}))},a.addNote=function(){U.c.post("client/note",{note:a.props.note}).then((function(){a.setState({editNote:""},(function(){a.props.showEditor(!1),a.props.setNote("")})),Object(S.a)("Note added","success"),a.getNotes()})).catch((function(e){return Object(j.a)(e)}))},a.updateNote=function(e){var t=a.props.note;e&&t?U.c.put("client/note?id=".concat(a.state.editNote),{note:t}).then((function(){a.props.setNote(null),a.setState({editNote:""}),a.getNotes(),Object(S.a)("Note updated","success")})).catch((function(e){return Object(j.a)(e)})):a.setState({editNote:""},(function(){return a.props.setNote("")}))},a.deleteNote=function(e){U.c.delete("client/note?id=".concat(e)).then((function(){a.getNotes(),Object(S.a)("Note deleted","success")})).catch((function(e){return Object(j.a)(e)}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getNotes()}},{key:"componentDidUpdate",value:function(){var e=this,t=document.getElementById("notes-infinite-scroll");t&&t.addEventListener("scroll",(function(){t.scrollTop+t.clientHeight>=t.scrollHeight-200&&e.debounceMethod()}))}},{key:"componentWillUnmount",value:function(){document.getElementById("notes-infinite-scroll").removeEventListener("scroll",(function(){}))}},{key:"loadMore",value:function(){var e=this,t=this.state,a=t.hasMore;!t.isFetching&&a&&this.setState((function(e){return{page:e.page+1,isFetching:!0}}),(function(){return e.getNotes(!0)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.notes,n=t.editNote,l=t.isFetching,r=this.props,c=r.note,o=r.showAddNoteEditor,i=Number(H.a.getUserId());return p.a.createElement("div",{className:"report-notes-container"},p.a.createElement(ne.a,{condition:!o&&!n},p.a.createElement("i",{onClick:function(){return e.props.showEditor(!0)},title:"Add Note",className:"fa add-note-btn fa-plus cashinflowclick "})),p.a.createElement(ne.a,{condition:o},p.a.createElement("div",{className:"add-notes-wrapper custom-editor-style mt-2"},p.a.createElement(ue.a,{editor:de.a,data:n?"":c,height:100,config:{toolbar:["bold","italic","numberedList","bulletedList"],placeholder:"Enter your notes here..."},onChange:function(t,a){e.props.setNote(a.getData())}}),p.a.createElement("div",{className:"button-wrap"},p.a.createElement("button",{disabled:!c,type:"button",onClick:this.addNote,className:"btn btn-primary mt-2 mr-1"},"Submit"),p.a.createElement("button",{type:"button",onClick:function(){e.props.showEditor(!1),e.props.setNote("")},className:"btn btn-primary mt-2"},"Cancel")))),p.a.createElement("div",{className:"report-notes-wrapper mt-3",id:"notes-infinite-scroll"},a.map((function(t){return p.a.createElement("div",{className:"row m-0 mb-2 mr-1 note",onClick:function(){i!==t.author_data.id||c?Ee()():e.setState({editNote:t.id},(function(){e.props.showEditor(!1),e.props.setNote(t.note)}))}},p.a.createElement("div",{className:"col-sm-12 text-secondary date"},p.a.createElement("i",null,p.a.createElement("i",{className:"fa fa-calendar"}),C()(t.date).format("MM/DD/YYYY")),i===t.author_data.id?p.a.createElement("button",{className:"btn p-0 float-right",title:"Delete Note",onClick:function(a){a.stopPropagation(),e.deleteNote(t.id)}},p.a.createElement("i",{className:"fa fa-trash-o"})):null),p.a.createElement(ne.a,{condition:n!==t.id},p.a.createElement("div",{className:"px-0 mt-1 pb-2 col-md-12 note-text"},fe()(t.note.trim()),i===t.author_data.id?p.a.createElement("button",{className:"btn p-0 float-right"},p.a.createElement("i",{className:" float-right fa fa-pencil"})):null)),p.a.createElement(ne.a,{condition:n===t.id},p.a.createElement(R.a,{onClickAway:function(){return e.updateNote(c!==t.note)},className:"textarea-wraper w-100 custom-editor-style mb-1"},p.a.createElement(ue.a,{editor:de.a,data:t.note,config:{toolbar:["bold","italic","numberedList","bulletedList"],placeholder:"Enter your notes here..."},onChange:function(t,a){e.props.setNote(a.getData())}}))),p.a.createElement("div",{className:"px-0 col-sm-12 username text-secondary"},p.a.createElement("i",null,p.a.createElement("i",{className:"fa fa-user"}),t.author_data.name)))})),p.a.createElement(ne.a,{condition:l},p.a.createElement(_.a,null)),p.a.createElement(ne.a,{condition:!l&&!a.length},p.a.createElement("div",{className:"px-0 pb-2 col-md-12 note-text"},"No notes."))))}}]),t}(p.a.Component),ye=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).nextPreviousDate=function(e){var t="prev"===e?"subtract":"add";"weekly"===a.props.reportFrequency?a.setState({data:[],isFetching:!0,currentPage:1,startDate:C()(a.state.startDate)[t]("days",7),endDate:C()(a.state.endDate)[t]("days",7)},a.getData):a.setState({data:[],isFetching:!0,currentPage:1,startDate:C()(a.state.startDate)[t]("months",1),endDate:C()(a.state.endDate)[t]("months",1).endOf("month")},a.getData)},a.handleExpand=function(){return a.setState({expand:!a.state.expand},a.props.handleSideBarExpand(!a.state.expand))},a.getData=function(){var e=a.state,t=e.data,n=e.endDate,l=e.startDate,r=e.currentPage,c=e.selectedtab,o=C()().diff(n)>=0;U.c.get("".concat(1===c?"arinvoice":"apinvoice","?page=").concat(r,"&from_date='").concat(C()(l).format("MM/DD/YYYY"),"'&to_date='").concat(C()(n).format("MM/DD/YYYY"),"'&status=").concat(o?"closed":"all","&date_type=").concat(1===c?"expected":"recommendation","&sort_order=desc&sort_by=").concat(1===c?"customer":"vendor")).then((function(e){a.setState({data:t.length?t.concat(e.data.result):e.data.result,isFetching:!1,hasMore:e.data.result.length>=20})})).catch((function(e){return Object(j.a)(e)}))},a.state={data:[],note:"",expand:!1,hasMore:!0,endDate:e.endDate,startDate:e.startDate,selectedtab:1,currentPage:1,isFetching:!0,showAddNoteEditor:!1},a.debounceMethod=re()(a.loadMore.bind(Object(u.a)(a)),500),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){var e=this,t=document.getElementById("infinite-scroll");t&&t.addEventListener("scroll",(function(){t.scrollTop+t.clientHeight>=t.scrollHeight-200&&e.debounceMethod()}))}},{key:"loadMore",value:function(){var e=this.state,t=e.hasMore;!e.isFetching&&t&&this.setState((function(e){return{currentPage:e.currentPage+1,isFetching:!0}}),this.getData)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.note,l=t.expand,r=t.endDate,c=t.isFetching,o=t.selectedtab,i=t.showAddNoteEditor,s=t.currentPage;return console.log("note ",n),p.a.createElement(p.a.Fragment,null,p.a.createElement(ne.a,{condition:!l},p.a.createElement("div",{className:"collapsed-quickview",id:"quickview-sidebar-collapsed"},p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"leftbaricon",onClick:this.handleExpand},p.a.createElement(ce.a,{placement:"left",overlay:p.a.createElement(oe.a,null,"Expand")},p.a.createElement("i",{className:"fa fa-chevron-left"}))),p.a.createElement("div",null,p.a.createElement("div",{onClick:function(){return e.setState({selectedtab:1,currentPage:1,isFetching:!0,data:[]},(function(){e.getData(),e.handleExpand()}))}},p.a.createElement(ce.a,{placement:"left",overlay:p.a.createElement(oe.a,null,"Receivables")},p.a.createElement("i",{className:"onlyicon fas fa-hand-holding-usd cursor-pointer","aria-hidden":"true"}))),p.a.createElement("div",{onClick:function(){return e.setState({selectedtab:2,currentPage:1,isFetching:!0,data:[]},(function(){e.getData(),e.handleExpand()}))}},p.a.createElement(ce.a,{placement:"left",overlay:p.a.createElement(oe.a,null,"Payables")},p.a.createElement("i",{className:"onlyicon fas fa-file-invoice-dollar cursor-pointer","aria-hidden":"true"}))),p.a.createElement("div",{onClick:function(){return e.setState({selectedtab:3},e.handleExpand)}},p.a.createElement(ce.a,{placement:"left",overlay:p.a.createElement(oe.a,null,"Notes")},p.a.createElement("i",{class:"onlyicon fa fa-pencil cursor-pointer","aria-hidden":"true"}))))))),p.a.createElement(ne.a,{condition:l},p.a.createElement("div",{id:"quickview-sidebar",className:"col-md-3"},p.a.createElement("div",{className:"leftbaricon",onClick:this.handleExpand},p.a.createElement(ce.a,{placement:"left",overlay:p.a.createElement(oe.a,null,"Collapse")},p.a.createElement("i",{className:"fa fa-chevron-right"}))),p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{className:"w-100"},p.a.createElement(ne.a,{condition:3!==o},p.a.createElement("div",{className:"text-center pb-1"},p.a.createElement("i",{className:"fa fa-angle-left",onClick:function(){return e.nextPreviousDate("prev")},id:"prevDate","aria-hidden":"true"}),p.a.createElement("span",{id:"showDate"},C()(r).format("ddd, DD MMM, YYYY")),p.a.createElement("i",{className:"fa fa-angle-right",id:"nextDate","aria-hidden":"true",onClick:function(){return e.nextPreviousDate("next")}}))),p.a.createElement("div",null,p.a.createElement("ul",{id:"sideTabBar",className:"nav nav-tabs mt-3 mb-2"},p.a.createElement(ce.a,{placement:"top",overlay:p.a.createElement(oe.a,null,"Receivables")},p.a.createElement("li",{onClick:function(){return e.setState({selectedtab:1,currentPage:1,isFetching:!0,data:[]},e.getData)},className:"cursour-pointer w-33 text-center ".concat(1===o&&"active")},p.a.createElement("i",{className:"fas fa-hand-holding-usd cursor-pointer","aria-hidden":"true"}))),p.a.createElement(ce.a,{placement:"top",overlay:p.a.createElement(oe.a,null,"Payables")},p.a.createElement("li",{onClick:function(){return e.setState({selectedtab:2,currentPage:1,isFetching:!0,data:[]},e.getData)},className:"cursour-pointer w-33 text-center ".concat(2===o&&"active")},p.a.createElement("i",{className:"fas fa-file-invoice-dollar cursor-pointer","aria-hidden":"true"}))),p.a.createElement(ce.a,{placement:"top",overlay:p.a.createElement(oe.a,null,"Notes")},p.a.createElement("li",{onClick:function(){return e.setState({selectedtab:3})},className:"cursour-pointer w-33 text-center ".concat(3===o&&"active")},p.a.createElement("i",{class:"fa fa-pencil cursor-pointer","aria-hidden":"true"})))))),p.a.createElement(ne.a,{condition:[1,2].includes(o)},p.a.createElement("div",{id:"infinite-scroll",className:"invoices-wrapper hide-scroll"},p.a.createElement("div",{id:"pLisitng",className:"pLisitng cTab"},p.a.createElement(ne.a,{condition:1===s&&c},p.a.createElement(_.a,null)),p.a.createElement(ne.a,{condition:a.length},a.map((function(e){return p.a.createElement(ie.a,Object.assign({key:e.id},e,{status:"all",type:1===o?"customers":"vendors"}))})),p.a.createElement(ne.a,{condition:c},p.a.createElement(_.a,null))),p.a.createElement(ne.a,{condition:!c&&!a.length},p.a.createElement("span",null,"No Data"))))),p.a.createElement(ne.a,{condition:3===o},p.a.createElement(ge,{note:n,setNote:function(t){e.setState({note:t})},showAddNoteEditor:i,showEditor:function(t){return e.setState({showAddNoteEditor:t})}})))))))}}]),t}(p.a.Component),be=Object(N.b)((function(e){return{state:e}}),{})(ye),ve=(a(751),function(e){return e<0?"-$".concat(Math.abs(e).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")):"$".concat(e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}),we=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"weekly",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,l=[],r=[],c=e;if("weekly"===a){for(var o=t;o>=1;o--){var i=C()().weekday(n).day(6+n-7*o).format("MM/DD/YYYY");C()(i).isSame(new Date,"day")||C()(i).isAfter(new Date,"day")?(c-=1,r.push(i),l.unshift(C()().weekday(n).day(6+n-7*(t+o)).format("MM/DD/YYYY"))):l.push(C()().weekday(n).day(6+n-7*o).format("MM/DD/YYYY"))}for(var s=0;s<c;s++)r.push(C()().weekday(n).day(6+n+7*s).format("MM/DD/YYYY"))}else{for(var u=t;u>=1;u--)l.push(C()().subtract(u,"months").endOf("month").format("MM/DD/YYYY"));for(var m=0;m<e;m++)r.push(C()().add(m,"months").endOf("month").format("MM/DD/YYYY"))}return l.concat(r)},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Array(e).fill(0));return a.map((function(e,a){return 0===a?p.a.createElement("th",null):a<t+1?p.a.createElement("th",{className:"text-center"},"Actuals"):p.a.createElement("th",{className:"text-center"},"Forecast")}))},Ce=function(e,t){return t?"cell-grey ".concat(e):e},Ne={item:[],modal:"",startDay:"",itemFirst:{},monthCount:"",dummyArray:[],dateRanges:[],cashInTotal:[],bankbalance:[],actualsCount:4,cashOutTotal:[],payrollTotal:[],dummyArrayItem:[],isTotalLoading:!0,arInvoiceTotal:[],apInvoiceTotal:[],cashInFlowItem:[],cashinZeroItem:[],forecastConfig:13,sidebarExpanded:!1,reportFrequency:"weekly",cashOutFlowItem:[],cashoutZeroItem:[],editCashOutItem:"",paymentPlanTotal:[],editCashFlowItem:"",addCashInflowItem:!1,addCashOutFlowItem:!1,paymentPlanDetails:[],orderBacklogTotal:[],vendorCategoryList:[],bankbalanceoriginal:[],iscashinDataLoading:!0,fetchingPaymentPlan:!1,netOperatingCashFlow:[],isBankBalanceLoading:!0,iscashoutDataLoading:!0,vendorCategoryTotals:[],vendorCategoryZeroItem:[],customerCategoryList:[],endingCashBalanceTotal:[],customerCategoryTotals:[],customerCategoryZeroItem:[],vendorCategoryOtherTotal:[],customerCategoryOtherTotal:[],showCashInZeroItem:!1,showCashOutZeroItem:!1,payplanmodalkey:"paymentplan"},xe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleFixedTable=function(){var e=document.getElementById("static-header-table"),t=document.getElementById("exportgraph"),a=document.getElementById("scroll-table2"),n=document.getElementById("scroll-table"),l=document.getElementById("report-scroll").scrollTop;n&&t&&(n.scrollLeft=a.scrollLeft,l>t.clientHeight+120?(e.classList.add("visible-hidden"),n.classList.remove("d-none")):(e.classList.remove("visible-hidden"),n.classList.add("d-none")))},a.getStartDate=function(e){var t=a.state.reportFrequency,n=C()(e).subtract("days",6).format("MM/DD/YYYY");return"monthly"===t&&(n=C()(e).startOf("month").format("MM/DD/YYYY")),n},a.getReportConfig=function(){U.c.get("/client").then((function(e){var t=e.data.result,n=t.report_interval||"weekly",l="weekly"!==n?t.report_num_months:t.report_num_weeks||13,r="weekly"!==n?t.report_num_actuals_months||1:t.report_num_actuals_weeks||4;a.setState({item:new Array(l+r).fill({amount:""}),dateRanges:we(l,r,n||"weekly",t.report_start_day_of_week),startDay:null!==t.report_start_day_of_week?t.report_start_day_of_week:1,reportFrequency:n,monthCount:t.report_num_months||2,dummyArray:new Array(l+r).fill(0),forecastConfig:l,actualsCount:r,dummyArrayItem:new Array(l+r).fill({amount:""})},a.refreshData),document.getElementById("scroll-table2").scrollLeft=100*a.state.actualsCount})).catch((function(e){return Object(j.a)(e)}))},a.handleSideBarExpand=function(e){return a.setState({sidebarExpanded:e},(function(){a.handleFixedTable(),a.getScrollTableWidth()}))},a.getPaymentPlanDetails=function(e,t){var n=a.state.dateRanges,c="paymentinstallment";e&&e.stopPropagation(),(t||0===t)&&(c="".concat(c,"?from_date=").concat(a.getStartDate(n[t]),"&to_date=").concat(n[t])),a.setState({fetchingPaymentPlan:!0,paymentPlanDetails:[],selectedWeek:t,modal:"Payment Plan Details",openModalIndex:t}),U.c.get(c).then((function(e){var t=h()(e,"data.result",[]),n=t;n=n.map((function(e){return Object(r.a)({},e,{installments:t.filter((function(t){return t.plan_id===e.plan_id})).map((function(e){return[e.id,e.date,e.amount]}))})})),n=b()(n,"plan_id"),Promise.all(n.map((function(e,t){return U.c.get("paymentplan?id=".concat(e.plan_id))}))).then((function(e){n=w()(n.map((function(t,a){return Object(r.a)({},h()(e[a],"data.result[0]",""),{},t)})),["supplierid"]),Promise.all(n.map((function(e){return U.c.get("supplier/report?id=".concat(e.supplierid))}))).then((function(e){var t=(n=n.map((function(t,a){return Object(r.a)({},t,{},h()(e[a],"data",""))})).filter((function(e){return h()(e,"invoices[0]","")}))).filter((function(e){return e.is_payment_plan})),c=n.filter((function(e){return!e.is_payment_plan})),o=[];c.forEach((function(e){h()(e,"installments",[]).forEach((function(t){o.push(Object(r.a)({},e,{installments:[t]}))}))}));var i=[].concat(Object(l.a)(t.map((function(e,t){return Object(r.a)({},e,{"Vendor Name":h()(n,"[".concat(t-1,']["Vendor Name"]'),"")===e["Vendor Name"]?"":e["Vendor Name"]})}))),Object(l.a)(o.map((function(e,t){return Object(r.a)({},e,{"Vendor Name":h()(n,"[".concat(t-1,']["Vendor Name"]'),"")===e["Vendor Name"]?"":e["Vendor Name"]})}))));a.setState({paymentPlanDetails:i,fetchingPaymentPlan:!1})}))}))}))},a.generateExportStylesheet=function(){var e=document.getElementById("exportexceltable").rows[0].cells.length,t=Math.ceil(e/10),a=document.createElement("style");a.innerHTML="\n      #exportexceltable td,\n      #exportexceltable th {\n        display: none;\n      }\n      #exportexceltable td:first-child,\n      #exportexceltable th:first-child {\n          display: table-cell;\n      }";for(var n=0;n<t;n++){var l=2+9*n,r=10+9*n;a.innerHTML+="\n        .hide".concat(n," td:nth-child(n+").concat(l,"):nth-child(-n+").concat(r,"),\n        .hide").concat(n," th:nth-child(n+").concat(l,"):nth-child(-n+").concat(r,") {\n            display: table-cell!important;\n        }")}document.head.appendChild(a)},a.getVendorCategoryData=function(e,t,n){for(var c=[],o=0;o<e.length;o++)c.push(U.c.get("apinvoice/total?payment_plan=exclude&date_type=recommendation&to_date='".concat(e[o],"'&from_date='").concat(a.getStartDate(e[o]),"'&status='").concat(o<n?"closed":"all","'&vendor_category_id=").concat(t.id)));Promise.all(c).then((function(e){a.setState({vendorCategoryTotals:[].concat(Object(l.a)(a.state.vendorCategoryTotals),[Object(r.a)({category:t.name},t,{total:e.map((function(e){return Math.round(e.data.total)||0}))})])},(function(){var e=a.state,t=e.vendorCategoryTotals,n=e.apInvoiceTotal,l=t.map((function(e){return e.total})).reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]);a.setState({vendorCategoryOtherTotal:n.map((function(e,t){return e-l[t]}))})}))})).catch((function(e){return Object(j.a)(e)}))},a.getVendorCategory=function(){var e=a.state,t=e.actualsCount,n=e.dateRanges;U.c.get("vendorcategory?per_page=100").then((function(e){a.setState({vendorCategoryList:e.data.result.filter((function(e){return e.is_selected}))},(function(){a.state.vendorCategoryList.length&&a.state.vendorCategoryList.forEach((function(e){return a.getVendorCategoryData(n,e,t)}))}))})).catch((function(e){return Object(j.a)(e)}))},a.getCustomerCategoryData=function(e,t,n){for(var c=[],o=0;o<e.length;o++)c.push(U.c.get("arinvoice/total?date_type=expected&to_date='".concat(e[o],"'&from_date='").concat(a.getStartDate(e[o]),"'&status='").concat(o<n?"closed":"all","'&customer_category_id=").concat(t.id)));Promise.all(c).then((function(e){a.setState({customerCategoryTotals:[].concat(Object(l.a)(a.state.customerCategoryTotals),[Object(r.a)({category:t.name},t,{total:e.map((function(e){return Math.round(e.data.total)||0}))})])},(function(){var e=a.state,t=e.customerCategoryTotals,n=e.arInvoiceTotal,l=t.map((function(e){return e.total})).reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]);a.setState({customerCategoryOtherTotal:n.map((function(e,t){return e-l[t]}))})}))})).catch((function(e){return Object(j.a)(e)}))},a.getCustomerCategory=function(){var e=a.state,t=e.actualsCount,n=e.dateRanges;U.c.get("customercategory?per_page=100").then((function(e){a.setState({customerCategoryList:e.data.result.filter((function(e){return e.is_selected}))},(function(){a.state.customerCategoryList.length&&a.state.customerCategoryList.forEach((function(e){return a.getCustomerCategoryData(n,e,t)}))}))})).catch((function(e){return Object(j.a)(e)}))},a.getItemData=function(e,t,c,o,i,s){var u=Object(r.a)({},a.state.itemFirst,Object(n.a)({description:h()(a.state,"itemFirst.description","")},t,e));if(o&&(u.id=o,u.description=i),c&&(u.date=c),"description"===t)o?a.setState({itemFirst:Object(n.a)({id:o,description:i},t,e),item:h()(a.state,"item",[]).map((function(e){return Object(r.a)({},e,{description:h()(a.state,"itemFirst.description","")})}))}):a.setState({itemFirst:Object(r.a)({},a.state.itemFirst,Object(n.a)({},t,e)),item:h()(a.state,"item",[]).map((function(e){return Object(r.a)({},e,{description:h()(a.state,"itemFirst.description","")})}))});else{var m=Object(l.a)(a.state.item);m[s]=u,a.setState({item:m})}},a.onSubmitItem=function(e,t,r){var c="addCashInflowItem"===e?"cashin":"cashout";if(h()(t,"[0].amount",""))if(h()(t,"[0].description","")){var o=a.state,i=o.dummyArrayItem,s=o.dateRanges;U.c.post(c,{records:t}).then((function(t){a.setState({item:Object(l.a)(i),itemFirst:{}}),"addCashInflowItem"===e&&(a.getCashInFlow(s,!0),a.calculateCashInTotal()),"addCashOutFlowItem"===e&&(a.getCashOutFlow(s,!0),a.calculateCashOutTotal())})).catch((function(e){return Object(j.a)(e)})),r||a.setState(Object(n.a)({},e,!1))}else Object(S.a)("Description is required","error");else Object(S.a)("Please add at least one amount","error")},a.addNewItem=function(e){var t=a.state,r=t.dateRanges,c=t.dummyArrayItem,o=t.actualsCount;return p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){return a.getItemData(e.target.value,"description")},placeholder:"Enter ...",value:h()(a.state,"itemFirst.description","")})),r.map((function(e,t){return p.a.createElement("td",{key:t},p.a.createElement("input",{type:"number",onInput:function(n){a.getItemData(n.target.value,"amount",e,null,null,t)},className:Ce("text-right form-control",o===t),placeholder:"Amount"}))})),p.a.createElement("td",null,p.a.createElement("span",{title:"Save",className:"btn editdltbtn",onClick:function(){return a.onSubmitItem(e,a.state.item.filter((function(e){return e&&e.amount})))}},p.a.createElement("i",{className:"fas fa-save",style:{fontSize:"15px"}})),p.a.createElement("span",null,"|"),p.a.createElement("span",{title:"Cancel",className:"btn editdltbtn",onClick:function(){var t;return a.setState((t={},Object(n.a)(t,e,!1),Object(n.a)(t,"item",Object(l.a)(c)),Object(n.a)(t,"itemFirst",{}),t))}},p.a.createElement("i",{className:"fas fa-remove",style:{fontSize:"15px"}}))))},a.onSubmitEditedData=function(e,t,n){var l="addCashOutFlowItem"===n?"cashout?id=".concat(t.id):"cashin?id=".concat(t.id),r=[];if("description"===e){r=[{description:t.description}];for(var c=[],o=0;o<t.ids.length;o++){var i="addCashOutFlowItem"===n?"cashout?id=".concat(t.ids[o]):"cashin?id=".concat(t.ids[o]);c.push(U.c.put(i,{records:r}))}Promise.all(c).then((function(e){"addCashInflowItem"===n&&a.getCashInFlow(a.state.dateRanges,!0),"addCashOutFlowItem"===n&&a.getCashOutFlow(a.state.dateRanges,!0)})).catch((function(e){return Object(j.a)(e)}))}else if(t.id)r=[{amount:t.amount}],U.c.put(l,{records:r}).then((function(e){"addCashInflowItem"===n&&a.getCashInFlow(a.state.dateRanges,!0),"addCashOutFlowItem"===n&&a.getCashOutFlow(a.state.dateRanges,!0)})).catch((function(e){return Object(j.a)(e)}));else{var s={description:t.description,date:t.date,amount:t.amount};a.onSubmitItem(n,[s],!1)}},a.editLineItem=function(e,t,r){var c=a.state,o=c.dateRanges,i=c.dummyArrayItem,s=c.actualsCount,u=h()(e.find((function(e){return e&&e.description})),"description",""),m=e.filter((function(e){return e||""})).map((function(e){return e.id}));return p.a.createElement(p.a.Fragment,null,p.a.createElement("td",null,p.a.createElement("input",{type:"text",defaultValue:u,className:"form-control",placeholder:"Enter ...",onBlur:function(e){return a.onSubmitEditedData("description",{description:e.target.value,ids:m},t)}})),e.map((function(c,m){return e.length-1===m?p.a.createElement("td",null,p.a.createElement("span",{title:"Cancel",className:"btn editdltbtn",onClick:function(e){var t;e.stopPropagation(),a.setState((t={},Object(n.a)(t,r,""),Object(n.a)(t,"item",Object(l.a)(i)),Object(n.a)(t,"itemFirst",{}),t))}},p.a.createElement("i",{className:"fas fa-remove",style:{fontSize:"15px"}}))):p.a.createElement("td",null,p.a.createElement("input",{type:"number",defaultValue:c?c.amount:0,className:Ce("text-right form-control",s===m),placeholder:"Amount",onBlur:function(e){return a.onSubmitEditedData("amount",{description:u,amount:e.target.value||"0",id:c?c.id:"",date:o[m]},t)}}))})))},a.getBankBalance=function(e,t,n){for(var l=[],r=0;r<=t;r++)l.push(U.c.get("bankbalance/total?to_date='".concat(a.getStartDate(e[r]),"'&from_date='").concat(a.getStartDate(e[r]),"'")));Promise.all(l).then((function(e){a.setState({bankbalance:e.map((function(e){return Math.round(e.data.total)||0})).concat(new Array(n).fill(0)),bankbalanceoriginal:e.map((function(e){return Math.round(e.data.total)||0})),isBankBalanceLoading:!1})})).catch((function(e){return Object(j.a)(e)}))},a.getARInvoiceTotal=function(e,t){for(var n=[],l=0;l<e.length;l++)n.push(U.c.get("arinvoice/total?date_type=expected&to_date='".concat(e[l],"'&from_date='").concat(a.getStartDate(e[l]),"'&status='").concat(l<t?"closed":"all","'")));Promise.all(n).then((function(n){a.setState({arInvoiceTotal:n.map((function(e){return Math.round(e.data.total)||0}))},(function(){a.getPaymentPlanTotal(e,t),a.getCustomerCategory()}))})).catch((function(e){return Object(j.a)(e)}))},a.getPaymentPlanTotal=function(e,t){for(var n=[],l=0;l<e.length;l++)n.push(U.c.get("paymentplan/total?to_date='".concat(e[l],"'&from_date='").concat(a.getStartDate(e[l]),"'&status='").concat(l<t?"closed":"all","'")));Promise.all(n).then((function(n){a.setState({paymentPlanTotal:n.map((function(e){return Math.round(e.data.total)||0}))},a.getCashInFlow(e,t))})).catch((function(e){return Object(j.a)(e)}))},a.getOrderBacklogTotal=function(e,t){for(var n=[],l=0;l<e.length;l++)n.push(U.c.get("orderbacklog/total?date_type=expected&to_date='".concat(e[l],"'&from_date='").concat(a.getStartDate(e[l]),"'&status='").concat(l<t?"closed":"all","'")));Promise.all(n).then((function(e){a.setState({orderBacklogTotal:e.map((function(e){return Math.round(e.data.total)||0}))})})).catch((function(e){return Object(j.a)(e)}))},a.getAPInvoiceTotal=function(e,t){for(var n=[],l=0;l<e.length;l++)n.push(U.c.get("apinvoice/total?payment_plan=exclude&date_type=recommendation&to_date='".concat(e[l],"'&from_date='").concat(a.getStartDate(e[l]),"'&status='").concat(l<t?"closed":"all","'")));Promise.all(n).then((function(t){a.setState({apInvoiceTotal:t.map((function(e){return Math.round(e.data.total)||0}))},(function(){a.getPayRollData(e),a.getVendorCategory()}))})).catch((function(e){return Object(j.a)(e)}))},a.getPayRollData=function(e){for(var t=[],n=0;n<e.length;n++)t.push(U.c.get("payroll/total?to_date='".concat(e[n],"'&from_date='").concat(a.getStartDate(e[n]))));Promise.all(t).then((function(t){a.setState({payrollTotal:t.map((function(e){return Math.round(e.data.total)||0}))},a.getCashOutFlow(e))})).catch((function(e){return Object(j.a)(e)}))},a.getCashInFlow=function(e,t){for(var n=[],c=0;c<e.length;c++)n.push(U.c.get("cashin?to_date='".concat(e[c],"'&from_date='").concat(e[c],"'")));Promise.all(n).then((function(n){var c=[];n.forEach((function(e){c.push.apply(c,Object(l.a)(e.data.result))}));var o=a.updateData(c.map((function(t){return Object(r.a)({},t,{amount:Math.round(t.amount),date:C()(t.date).format("MM/DD/YYYY"),position:e.indexOf(C()(t.date).format("MM/DD/YYYY"))})}))),i=o.filter((function(e){return!e[a.state.actualsCount]||!e[a.state.actualsCount].amount}));a.setState({iscashinDataLoading:!1,showCashInZeroItem:i.length>3&&t,cashInFlowItem:o.filter((function(e){return e[a.state.actualsCount]&&e[a.state.actualsCount].amount})),cashinZeroItem:i},a.calculateCashInTotal)})).catch((function(e){return Object(j.a)(e)}))},a.calculateCashInTotal=function(){var e=a.state,t=e.cashInFlowItem,n=e.cashinZeroItem,r=e.arInvoiceTotal,c=e.orderBacklogTotal,o=e.forecastConfig,i=e.actualsCount,s=[[].concat(Object(l.a)(t),Object(l.a)(n)).map((function(e){return e.map((function(e){return e?e.amount:0}))})).reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]).splice(0,o+i),r].reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]);s=[s,c].reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]),a.setState({cashInTotal:s},a.calculateCashOutTotal)},a.calculateCashOutTotal=function(){var e=a.state,t=e.cashInTotal,n=e.actualsCount,r=e.payrollTotal,c=e.apInvoiceTotal,o=e.forecastConfig,i=e.cashOutFlowItem,s=e.cashoutZeroItem,u=e.paymentPlanTotal,m=e.bankbalanceoriginal,d=[[].concat(Object(l.a)(i),Object(l.a)(s)).map((function(e){return e.map((function(e){return e?e.amount:0}))})).reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]).splice(0,o+n),c,r].reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]);d=[d,u].reduce((function(e,t){return t.forEach((function(t,a){e[a]=(e[a]||0)+t})),e}),[]);for(var p=t.map((function(e,t){return e-d[t]})),f=m.map((function(e,t){return e+p[t]})).concat(new Array(o-1).fill(0)),h=m.concat(new Array(o-1).fill(0)),E=n+1;E<o+n;E++)h[E]=f[E-1],f[E]=f[E-1]+p[E];a.setState({isTotalLoading:!1,cashOutTotal:d,netOperatingCashFlow:p,endingCashBalanceTotal:f,bankbalance:h},(function(){a.getScrollTableWidth(),a.generateExportStylesheet()}))},a.getCashOutFlow=function(e,t){for(var n=[],c=0;c<e.length;c++)n.push(U.c.get("cashout?to_date='".concat(e[c],"'&from_date='").concat(e[c],"'")));Promise.all(n).then((function(n){var c=[];n.forEach((function(e){c.push.apply(c,Object(l.a)(e.data.result))}));var o=a.updateData(c.map((function(t){return Object(r.a)({},t,{amount:Math.round(t.amount),date:C()(t.date).format("MM/DD/YYYY"),position:e.indexOf(C()(t.date).format("MM/DD/YYYY"))})}))),i=o.filter((function(e){return!e[a.state.actualsCount]||!e[a.state.actualsCount].amount}));a.setState({iscashoutDataLoading:!1,showCashOutZeroItem:i.length>3&&t,cashOutFlowItem:o.filter((function(e){return e[a.state.actualsCount]&&e[a.state.actualsCount].amount})),cashoutZeroItem:i},a.calculateCashOutTotal)})).catch((function(e){return Object(j.a)(e)}))},a.updateData=function(e){var t=a.state,n=t.actualsCount,l=t.forecastConfig+n+1,r=g()(e.map((function(e){return e.description}))),c=[];r.forEach((function(t){c.push(e.filter((function(e){return e.description===t})))}));var o=new Array(l).fill(null);if(c.length)for(var i=0;i<c.length;i++){for(var s=0;s<l;s++){if(c[i][s])o[c[i][s].position]=c[i][s]}c[i]=o,o=new Array(l).fill(null)}return c},a.deleteRecords=function(e,t){var n=a.state.dateRanges;Object(D.c)({variant:"warning",msg:"Are you sure you want to delete this record?",onSave:function(){Object(D.b)();for(var l=e.filter((function(e){return e||""})).map((function(e){return e.id})),r=[],c=0;c<l.length;c++)r.push(U.c.put("".concat(t,"/delete?id=").concat(l[c]),{}));Promise.all(r).then((function(e){"cashin"===t?a.getCashInFlow(n,!0):a.getCashOutFlow(n,!0)})).catch((function(e){return Object(j.a)(e)}))}})},a.closeEditMode=function(e){e.preventDefault(),e.stopPropagation();var t=a.state,n=t.addCashInflowItem,l=t.addCashOutFlowItem;["number","text"].includes(e.target.type)||l&&n||a.setState({editCashFlowItem:"",editCashOutItem:""})},a.setModal=function(e){return a.setState({modal:e})},a.openDetailsPage=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;c&&c.stopPropagation();var o=a.state,i=o.dateRanges,s=o.actualsCount,u={"/payroll":{key:"payrollFilters"},"/payables":{key:"payableFilters",dateType:"recommendation",payment_plan:"exclude",api_sort_by:"invoice_amount",api_sort_order:"desc"},"/receivables":{key:"receivableFilters",dateType:"expected",api_sort_by:"invoice_amount",api_sort_order:"desc"},"/backlog":{key:"backlogFilters",dateType:"expected"}},m=Object(r.a)({startDate:a.getStartDate(i[n]),endDate:i[n],status:n<s?"closed":"all"},u[e],{},l);localStorage.setItem(u[e].key,JSON.stringify(m)),window.open(e,"_blank")},a.getScrollTableWidth=function(){if(!a.state.isTotalLoading){document.getElementById("exporttable").removeAttribute("style"),document.getElementById("scroll-table").removeAttribute("style");var e=document.getElementById("report-scroll").clientWidth-10;document.getElementById("scroll-table").style.width="".concat(e,"px");var t=document.querySelector("#exporttable table").clientWidth;document.getElementById("exporttable").style.width=e>t?"100%":"auto"}},a.renderMoreLessRow=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=a.state,c=r.dummyArray,o=r.actualsCount;return p.a.createElement("tr",null,p.a.createElement("td",{className:"t-link-black ".concat(l),onClick:function(){return a.setState(Object(n.a)({},e,!a.state[e]))}},p.a.createElement("strong",null,t)),c.map((function(e,t){return p.a.createElement("td",{className:Ce("",o===t)})})),p.a.createElement("td",null))},a.state=Object(r.a)({},Ne),a.refreshData=a.refreshData.bind(Object(u.a)(a)),a.storageChange=a.storageChange.bind(Object(u.a)(a)),a.handleScroll=a.handleScroll.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.body.classList.add("overflow-hidden"),document.title="Reports - Payference";var e=document.getElementById("scroll-table2"),t=document.getElementById("scroll-table"),a=document.getElementById("report-scroll");this.getReportConfig(),document.querySelector(".pay-rec-wrap").classList.add("reports-wrapper"),window.scrollTo(0,0),window.addEventListener("storage",this.storageChange,!1),window.addEventListener("resize",this.getScrollTableWidth,!1),a.addEventListener("scroll",this.handleFixedTable),e&&(t.addEventListener("scroll",this.handleScroll,!1),e.addEventListener("scroll",this.handleScroll,!1))}},{key:"componentDidUpdate",value:function(){this.getScrollTableWidth();var e=document.getElementById("scroll-table2");e&&(document.getElementById("scroll-table").scrollLeft=e.scrollLeft,e.addEventListener("scroll",this.handleScroll,!1));var t=document.querySelectorAll("input[type=number]");if(t.length)for(var a=["+","e"],n=0;n<t.length;n++)t[n].addEventListener("keydown",(function(e){a.includes(e.key)&&e.preventDefault()}))}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("overflow-hidden"),document.querySelector(".pay-rec-wrap").classList.remove("reports-wrapper"),window.removeEventListener("storage",this.storageChange),window.removeEventListener("resize",this.getScrollTableWidth,!1),document.getElementById("scroll-table2")&&document.getElementById("scroll-table2").removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){"scroll-table2"===e.target.id?document.getElementById("scroll-table").scrollLeft=document.getElementById("scroll-table2").scrollLeft:document.getElementById("scroll-table2").scrollLeft=document.getElementById("scroll-table").scrollLeft}},{key:"storageChange",value:function(e){if("refresh_reports"===e.key&&"true"===e.newValue){document.getElementById("static-header-table").classList.remove("visible-hidden"),document.getElementById("scroll-table").classList.add("d-none");var t=Object(r.a)({},Ne,{modal:this.state.modal});this.setState(t,this.getReportConfig),localStorage.removeItem("refresh_reports")}}},{key:"refreshData",value:function(){var e=this.state,t=e.dateRanges,a=e.actualsCount,n=e.reportFrequency,l=e.forecastConfig,r=e.openModalIndex,c=e.modal;this.getBankBalance(t,a,n,l),this.getOrderBacklogTotal(t,a,n),this.getARInvoiceTotal(t,a,n),this.getAPInvoiceTotal(t,a,n),c&&this.getPaymentPlanDetails(null,r)}},{key:"render",value:function(){var e=this,t=this.state,a=t.modal,n=t.dateRanges,r=t.bankbalance,c=t.cashInTotal,o=void 0===c?[]:c,i=t.dummyArray,s=t.actualsCount,u=t.payrollTotal,m=t.cashOutTotal,d=void 0===m?[]:m,f=t.selectedWeek,E=t.arInvoiceTotal,g=t.apInvoiceTotal,y=t.dummyArrayItem,b=t.isTotalLoading,v=t.forecastConfig,w=t.sidebarExpanded,k=t.reportFrequency,N=t.cashInFlowItem,D=t.cashOutFlowItem,S=t.editCashOutItem,j=t.paymentPlanTotal,Y=void 0===j?[]:j,L=t.orderBacklogTotal,B=void 0===L?[]:L,A=t.editCashFlowItem,R=t.addCashInflowItem,V=t.paymentPlanDetails,q=void 0===V?[]:V,Z=t.addCashOutFlowItem,z=t.iscashinDataLoading,W=t.fetchingPaymentPlan,U=t.isBankBalanceLoading,H=t.cashinZeroItem,K=t.cashoutZeroItem,J=t.iscashoutDataLoading,G=t.netOperatingCashFlow,X=t.vendorCategoryTotals,ee=t.endingCashBalanceTotal,te=t.customerCategoryTotals,ne=t.vendorCategoryOtherTotal,le=t.customerCategoryOtherTotal,re=t.payplanmodalkey,ce=t.showCashInZeroItem,oe=t.showCashOutZeroItem,ie=[].concat(Object(l.a)(N),Object(l.a)(H)),se=[].concat(Object(l.a)(D),Object(l.a)(K)),ue=[{Header:function(){return p.a.createElement("span",null,"Vendor")},className:"ml-3",width:200,accessor:"Vendor Name",Cell:function(e){return p.a.createElement("span",null,e.value)}},{Header:function(){return p.a.createElement("span",{className:"ml-3"},"Installments")},accessor:"installments",Cell:function(e){return p.a.createElement("table",{style:{maxWidth:300}},h()(e,"original['Vendor Name']","")&&p.a.createElement("tr",{className:"mb-2"},!f&&0!==f&&p.a.createElement("td",null,p.a.createElement("strong",null,"No")),p.a.createElement("td",null,p.a.createElement("strong",null,"Date")),p.a.createElement("td",{className:"text-right"},p.a.createElement("strong",null,"Amount"))),h()(e,"original.installments",[]).map((function(e,t){return p.a.createElement("tr",{className:"mb-2"},!f&&0!==f&&p.a.createElement("td",{className:"width-94px"},"#",t+1),p.a.createElement("td",{className:"width-94px"},C()(e[1]).format("MM/DD/YYYY")),p.a.createElement("td",{className:"width-94px text-right"},Object(F.c)(e[2])))})))}}],me=q.filter((function(e){return"paymentplan"===re?e.is_payment_plan:!e.is_payment_plan}));return p.a.createElement("div",{className:"row px-15 reports",id:"dashboardBody"},p.a.createElement(M.a,{className:"mt-4",size:"lg",show:a,onHide:function(){return e.setModal("")}},p.a.createElement(M.a.Header,{closeButton:!0}),p.a.createElement(M.a.Body,{style:{"max-height":"calc(100vh - 210px)","overflow-y":"auto"}},p.a.createElement("div",null,W?p.a.createElement(_.a,null):p.a.createElement("div",null,p.a.createElement("div",{className:"row"},p.a.createElement("span",{className:"col-md-6"},p.a.createElement(x.a,{variant:"tabs",activeKey:re,onSelect:function(t){return e.setState({payplanmodalkey:t})}},p.a.createElement(x.a.Item,null,p.a.createElement(x.a.Link,{eventKey:"paymentplan"},"Payment Plans")),p.a.createElement(x.a.Item,null,p.a.createElement(x.a.Link,{eventKey:"partialpayment"},"Partial Payments")))),p.a.createElement("span",{className:"col-md-6"},p.a.createElement(Q,{exportData:q}))),p.a.createElement(P.a,{noDataText:"No data found",minRows:me.length>20?20:me.length,resizable:!0,showPagination:!1,getTrProps:function(e,t,a){return{onClick:function(e){h()(t,"original.is_payment_plan","")?window.open("".concat(window.location.origin,"/vendors/").concat(t.original.supplierid,"?payment_plan"),"_blank"):h()(t,"original.invoices[0]","")&&window.open("".concat(window.location.origin,"/payables/").concat(t.original.invoices[0]),"_blank")}}},columns:ue,data:me}))))),p.a.createElement("div",{className:w?"col-md-9 pl-0 pr-1":"col-md-11 expanded-report"},p.a.createElement("div",{className:"card"},p.a.createElement("div",{className:"card-body"},p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-md-12"},p.a.createElement("div",{class:"reportlisthead",style:{float:"left"}},"weekly"===k?"Weekly":"Monthly"," Cash Flow As of ",C()().format("MMM DD, YYYY")))),p.a.createElement("div",{id:"report-scroll",className:"report-main-wrapper"},!b&&p.a.createElement("div",null,p.a.createElement("table",{id:"exportexceltable",style:{display:"none"}},p.a.createElement("thead",null,p.a.createElement("tr",null,ke(v+s+1,s,k))),p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"weekly"===k?"Week":"Month"," Ending")),n.map((function(e){return p.a.createElement("td",null,p.a.createElement("b",null,e))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Beginning Cash")),r.map((function(e,t){return p.a.createElement("td",{key:"bb".concat(t)},ve(e))}))),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)}))),p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Cash Inflow")),i.map((function(){return p.a.createElement("td",null)}))),p.a.createElement("tr",null,p.a.createElement("td",null,"A/R"),E.map((function(e,t){return p.a.createElement("td",{key:"ar".concat(t)},ve(e))}))),te.length?te.map((function(e){return p.a.createElement("tr",null,p.a.createElement("td",null,e.category),e.total.map((function(e,t){return p.a.createElement("td",{key:"ct".concat(t),className:"text-right"},ve(e))})),p.a.createElement("td",null))})):null,te.length?p.a.createElement(p.a.Fragment,null,p.a.createElement("tr",null,p.a.createElement("td",null,"Others"),le.map((function(e,t){return p.a.createElement("td",{key:"ct".concat(t),className:"text-right"},ve(e))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)})),p.a.createElement("td",null))):null,p.a.createElement("tr",{className:"cursour-pointer"},p.a.createElement("td",null,"Order Backlog"),B.map((function(e,t){return p.a.createElement("td",{key:"ar".concat(t),"data-id":"ar".concat(t),className:"text-right t-link-black"},ve(e))})),p.a.createElement("td",null)),ie.length?ie.map((function(e,t){return p.a.createElement("tr",null,p.a.createElement(p.a.Fragment,null,p.a.createElement("td",null,h()(e.find((function(e){return e&&e.description})),"description","")),e.map((function(t,a){return t?p.a.createElement("td",{key:"ar".concat(a)},ve(t.amount)):a===e.length-1?null:p.a.createElement("td",{key:"ar".concat(a)})}))))})):null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Total")),o.map((function(e,t){return p.a.createElement("td",{key:"ci".concat(t)},ve(e))}))),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)}))),p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Cash Outflow")),i.map((function(){return p.a.createElement("td",null)}))),p.a.createElement("tr",null,p.a.createElement("td",null,"A/P"),g.map((function(e,t){return p.a.createElement("td",{key:"py".concat(t)},ve(e))})),p.a.createElement("td",null)),X.length?X.map((function(e){return p.a.createElement("tr",null,p.a.createElement("td",null,e.category),e.total.map((function(e,t){return p.a.createElement("td",{key:"ct".concat(t),className:"text-right"},ve(e))})),p.a.createElement("td",null))})):null,X.length?p.a.createElement(p.a.Fragment,null,p.a.createElement("tr",null,p.a.createElement("td",null,"Others"),ne.map((function(e,t){return p.a.createElement("td",{key:"ct".concat(t),className:"text-right"},ve(e))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)})),p.a.createElement("td",null))):null,p.a.createElement("tr",null,p.a.createElement("td",null,"Payment Plans & Partial Payments"),Y.map((function(e,t){return p.a.createElement("td",{key:"ar".concat(t)},ve(e))}))),p.a.createElement("tr",null,p.a.createElement("td",null,"Payroll, Taxes & Benefits (401K)"),u.map((function(e,t){return p.a.createElement("td",{key:"py".concat(t)},ve(e))})),p.a.createElement("td",null)),se.length?se.map((function(e,t){return p.a.createElement("tr",null,p.a.createElement(p.a.Fragment,null,p.a.createElement("td",null,h()(e.find((function(e){return e&&e.description})),"description","")),e.map((function(t,a){return t?p.a.createElement("td",{key:"py".concat(a)},ve(t.amount)):a===e.length-1?null:p.a.createElement("td",{key:"py".concat(a)})}))))})):null,p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)}))),p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Total")),d.map((function(e,t){return p.a.createElement("td",{key:"co".concat(t)},p.a.createElement("b",null,ve(e)))}))),p.a.createElement("tr",null,p.a.createElement("td",null,"Net Operating Cash Flow"),G.map((function(e,t){return p.a.createElement("td",{key:"noc".concat(t)},ve(e))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(){return p.a.createElement("td",null)})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Ending Cash Balance")),ee.map((function(e,t){return p.a.createElement("td",null,ve(e))})),p.a.createElement("td",null))))),p.a.createElement("div",{className:"row ".concat(b?"pos-relative":""),id:"exportgraph"},p.a.createElement("div",{className:"".concat(b?"full-loader":"d-none")},p.a.createElement(_.a,null)),p.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},p.a.createElement("div",{style:{width:"100%"}},p.a.createElement(ae,{data:!b&&n.map((function(e,t){return{date:C()(e).format("MM/DD"),inflow:o[t],outflow:-1*d[t],nonOpDisbursement:G[t],endingCashBalance:ee[t]}}))})))),p.a.createElement("div",{className:"mt-3 mb-2 clearfix"},p.a.createElement(T.b,{to:"/settings/company#reports",target:"_blank"},p.a.createElement("i",{className:"fas fa-cog mr-1"}),"Report Settings"),p.a.createElement($,{reportFrequency:k,loading:b})),p.a.createElement("div",{className:"fixed-table d-none ".concat(w?"quickview-sidebar-expanded":"quickview-sidebar-collapsed"),id:"scroll-table"},p.a.createElement("div",{className:"reportlist"},p.a.createElement("table",null,p.a.createElement("thead",{className:"bg-light-grey"},p.a.createElement("tr",null,ke(v+s+1,s,k),p.a.createElement("th",null))),U?null:p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"weekly"===k?"Week":"Month"," Ending")),n.map((function(e,t){return p.a.createElement("td",{key:"we".concat(t),className:Ce("text-right",s===t)},p.a.createElement("b",null,e))})),p.a.createElement("td",null)),p.a.createElement("tr",{className:"row-grey"},p.a.createElement("td",null,p.a.createElement("b",null,"Beginning Cash")),r.map((function(t,a){var l=a===s;return p.a.createElement("td",{key:"bb".concat(a),onClick:function(){l&&(localStorage.setItem("selectedBankBalanceCheckDate",e.getStartDate(n[a])),window.open("".concat(window.location.origin,"/settings/company#bankbalance"),"_blank"))},"data-id":"bb".concat(a),className:Ce("text-right ".concat(l?"t-link cursour-pointer":""),l)},ve(t))})),p.a.createElement("td",null)),p.a.createElement("tr",null))))),p.a.createElement("div",{className:"row overflow-auto m-0 ".concat(b&&"pos-relative"),id:"scroll-table2"},p.a.createElement("div",{className:"".concat(b?"full-loader":"d-none"),style:{left:document.getElementById("scroll-table2")&&document.getElementById("scroll-table2").scrollLeft}},p.a.createElement(_.a,null)),p.a.createElement("div",{id:"exporttable",className:"table-".concat(v," ").concat(w?"quickview-sidebar-expanded":"quickview-sidebar-collapsed")},p.a.createElement("div",{className:"col-md-12",id:"static-header-table"},p.a.createElement("div",{className:"reportlist"},p.a.createElement("table",null,p.a.createElement("thead",{className:"bg-light-grey"},p.a.createElement("tr",null,ke(v+s+1,s,k),p.a.createElement("th",null))),U?null:p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"weekly"===k?"Week":"Month"," Ending")),n.map((function(e,t){return p.a.createElement("td",{key:"we".concat(t),className:Ce("text-right",s===t)},p.a.createElement("b",null,e))})),p.a.createElement("td",null)),p.a.createElement("tr",{className:"row-grey"},p.a.createElement("td",null,p.a.createElement("b",null,"Beginning Cash")),r.map((function(t,a){var l=a===s;return p.a.createElement("td",{key:"bb".concat(a),onClick:function(){l&&(localStorage.setItem("selectedBankBalanceCheckDate",e.getStartDate(n[a])),window.open("".concat(window.location.origin,"/settings/company#bankbalance"),"_blank"))},"data-id":"bb".concat(a),className:Ce("text-right ".concat(l?"t-link cursour-pointer":""),l)},ve(t))})),p.a.createElement("td",null)),p.a.createElement("tr",null))))),p.a.createElement("div",{className:"col-md-12"},p.a.createElement(I.a,{allowMultipleExpanded:!0,allowZeroExpanded:!0},p.a.createElement(I.b,null,p.a.createElement("div",{className:"reportlist"},p.a.createElement(I.d,null,p.a.createElement(I.c,null,p.a.createElement("table",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Cash Inflow"," ",p.a.createElement("i",{onClick:function(t){t.stopPropagation(),e.setState({addCashInflowItem:!0,item:Object(l.a)(y),itemFirst:{}})},className:"fa fa-plus cashinflowclick ".concat(""!==A||Z||R?"hide":""),title:"Click to add item","aria-hidden":"true"}))),o.map((function(e,t){return p.a.createElement("td",{key:"ci".concat(t),"data-id":"ci".concat(t),className:Ce("text-right",s===t)},ve(e))})),p.a.createElement("td",null))))),p.a.createElement(I.e,null,z?null:p.a.createElement(p.a.Fragment,null,p.a.createElement(I.a,{allowMultipleExpanded:!0,allowZeroExpanded:!0},p.a.createElement(I.b,null,p.a.createElement(I.d,null,p.a.createElement(I.c,{className:"accordion__button with-arrow-data"},p.a.createElement("table",null,p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"A/R"),E.map((function(t,a){return p.a.createElement("td",{key:"ar".concat(a),onClick:function(n){return e.openDetailsPage("/receivables",t,a,null,n)},"data-id":"ar".concat(a),className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)))))),p.a.createElement(I.e,null,p.a.createElement("table",null,p.a.createElement("tbody",null,te.length?te.map((function(t){return p.a.createElement("tr",null,p.a.createElement("td",{className:"pl-30px"},t.category),t.total.map((function(a,n){return p.a.createElement("td",{key:"ct".concat(n),onClick:function(){return e.openDetailsPage("/receivables",a,n,{customer_category_id:t.id})},className:Ce("text-right t-link-black",s===n)},ve(a))})),p.a.createElement("td",null))})):null,te.length?p.a.createElement(p.a.Fragment,null,p.a.createElement("tr",null,p.a.createElement("td",{className:"pl-30px"},"Others"),le.map((function(t,a){return p.a.createElement("td",{key:"ct".concat(a),onClick:function(){return e.openDetailsPage("/receivables",t,a,{customer_category_id:"0"})},className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(e,t){return p.a.createElement("td",{className:Ce("",s===t)})})),p.a.createElement("td",null))):null))))),p.a.createElement("table",null,p.a.createElement("tbody",null,R?this.addNewItem("addCashInflowItem"):null,p.a.createElement("tr",{className:"cursour-pointer"},p.a.createElement("td",null,"Order Backlog"),B.map((function(t,a){return p.a.createElement("td",{onClick:function(n){return e.openDetailsPage("/backlog",t,a,null,n)},key:"ar".concat(a),"data-id":"ar".concat(a),className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)),ie.length?(!ce&&H.length>3?N:ie).map((function(t,a){return A!==a&&t.length?p.a.createElement("tr",{style:{cursor:"pointer"},onClick:function(){h()(e.state,"itemFirst.description","")||e.setState({editCashFlowItem:a,addCashInflowItem:!1})}},p.a.createElement("td",{key:"ar-description-".concat(a)},h()(t.find((function(e){return e&&e.description})),"description","")),t.map((function(a,n){return a?p.a.createElement("td",{key:"ar".concat(n),"data-id":"ar".concat(n),className:Ce("text-right",s===n)},ve(a.amount)):n===t.length-1?p.a.createElement("td",null,p.a.createElement("span",{className:"options"},p.a.createElement("span",{style:{color:"#007bff",cursor:"pointer"},title:"Delete",onClick:function(a){a.stopPropagation(),e.deleteRecords(t,"cashin")}},p.a.createElement("i",{class:"fa fa-trash-o","aria-hidden":"true",style:{fontSize:"15px"}})))):p.a.createElement("td",{className:Ce("text-right",s===n),key:"ar".concat(n),"data-id":"ar".concat(n)},"$0")}))):p.a.createElement(O.a,{onClickAway:function(t){return e.closeEditMode(t)}},p.a.createElement("tr",null,e.editLineItem(t,"addCashInflowItem","editCashFlowItem")))})):null,H.length>3?this.renderMoreLessRow("showCashInZeroItem",ce?"Show less":"Show more"):null,p.a.createElement("tr",{className:"row-grey"},p.a.createElement("td",null,p.a.createElement("b",null,"Total")),o.map((function(e,t){return p.a.createElement("td",{key:"ci".concat(t),"data-id":"ci".concat(t),className:"text-right"},p.a.createElement("b",null,ve(e)))})),p.a.createElement("td",null)))))))),p.a.createElement(I.b,null,p.a.createElement("div",{className:"reportlist"},p.a.createElement(I.d,null,p.a.createElement(I.c,null,p.a.createElement("table",null,p.a.createElement("tr",null,p.a.createElement("td",null,p.a.createElement("b",null,"Cash Outflow"," ",p.a.createElement("i",{title:"Click to add item",onClick:function(t){t.stopPropagation(),e.setState({addCashOutFlowItem:!0})},className:"fa fa-plus cashinflowclick ".concat(""!==S||Z||R?"hide":""),"aria-hidden":"true"}))),d.map((function(e,t){return p.a.createElement("td",{"data-id":"co".concat(t),key:"co".concat(t),className:Ce("text-right",s===t)},ve(e))})),p.a.createElement("td",null))))),p.a.createElement(I.e,null,J?null:p.a.createElement(p.a.Fragment,null,p.a.createElement(I.a,{allowMultipleExpanded:!0,allowZeroExpanded:!0},p.a.createElement(I.b,null,p.a.createElement(I.d,null,p.a.createElement(I.c,{className:"accordion__button with-arrow-data"},p.a.createElement("table",null,p.a.createElement("tr",null,p.a.createElement("td",null,"A/P"),g.map((function(t,a){return p.a.createElement("td",{key:"py".concat(a),onClick:function(n){return e.openDetailsPage("/payables",t,a,null,n)},"data-id":"py".concat(a),className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null))))),p.a.createElement(I.e,null,p.a.createElement("table",null,p.a.createElement("tbody",null,X.length?X.map((function(t){return p.a.createElement("tr",null,p.a.createElement("td",{className:"pl-30px"},t.category),t.total.map((function(a,n){return p.a.createElement("td",{key:"ct".concat(n),onClick:function(){return e.openDetailsPage("/payables",a,n,{vendor_category_id:t.id})},className:Ce("text-right t-link-black",s===n)},ve(a))})),p.a.createElement("td",null))})):null,X.length?p.a.createElement(p.a.Fragment,null,p.a.createElement("tr",null,p.a.createElement("td",{className:"pl-30px"},"Others"),ne.map((function(t,a){return p.a.createElement("td",{key:"ct".concat(a),onClick:function(){return e.openDetailsPage("/payables",t,a,{vendor_category_id:"0"})},className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(e,t){return p.a.createElement("td",{className:Ce("",s===t)})})),p.a.createElement("td",null))):null))))),p.a.createElement("table",null,p.a.createElement("tbody",null,Z?this.addNewItem("addCashOutFlowItem"):null,p.a.createElement("tr",{className:"cursour-pointer",onClick:this.getPaymentPlanDetails},p.a.createElement("td",null,"Payment Plans & Partial Payments"),Y.map((function(t,a){return p.a.createElement("td",{onClick:function(t){return e.getPaymentPlanDetails(t,a)},key:"ar".concat(a),"data-id":"ar".concat(a),className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null,"Payroll, Taxes & Benefits (401K)"),u.map((function(t,a){return p.a.createElement("td",{key:"py".concat(a),onClick:function(){return e.openDetailsPage("/payroll",t,a)},"data-id":"py".concat(a),className:Ce("text-right t-link-black",s===a)},ve(t))})),p.a.createElement("td",null)),se.length?(!oe&&K.length>3?D:se).map((function(t,a){return S!==a?p.a.createElement("tr",{style:{cursor:"pointer"},onClick:function(){h()(e.state,"itemFirst.description","")||e.setState({editCashOutItem:a,addCashOutFlowItem:!1})}},p.a.createElement("td",{key:"py-description-".concat(a)},h()(t.find((function(e){return e&&e.description})),"description","")),t.map((function(a,n){return a?p.a.createElement("td",{key:"py".concat(n),"data-id":"py".concat(n),className:Ce("text-right",s===n)},ve(a.amount)):n===t.length-1?p.a.createElement("td",null,p.a.createElement("span",{className:"options"},p.a.createElement("span",{style:{color:"#007bff",cursor:"pointer"},title:"Delete",onClick:function(a){a.stopPropagation(),e.deleteRecords(t,"cashout")}},p.a.createElement("i",{class:"fa fa-trash-o","aria-hidden":"true",style:{fontSize:"15px"}})))):p.a.createElement("td",{className:Ce("text-right",s===n),key:"py".concat(n),"data-id":"py".concat(n)},"$0")}))):p.a.createElement(O.a,{onClickAway:function(t){return e.closeEditMode(t)}},p.a.createElement("tr",null,e.editLineItem(t,"addCashOutFlowItem","editCashOutItem")))})):null,K.length>3?this.renderMoreLessRow("showCashOutZeroItem",oe?"Show less":"Show more"):null,p.a.createElement("tr",{className:"row-grey"},p.a.createElement("td",null,p.a.createElement("b",null,"Total")),d.map((function(e,t){return p.a.createElement("td",{"data-id":"co".concat(t),key:"co".concat(t),className:Ce("text-right",s===t)},p.a.createElement("b",null,ve(e)))})),p.a.createElement("td",null)))))))))),p.a.createElement("div",{className:"col-md-12"},p.a.createElement("div",{className:"reportlist"},b?null:p.a.createElement("table",null,p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"Net Operating Cash Flow"),G.map((function(e,t){return p.a.createElement("td",{"data-id":"noc".concat(t),className:Ce("text-right",s===t)},ve(e))})),p.a.createElement("td",null)),p.a.createElement("tr",null,p.a.createElement("td",null),i.map((function(e,t){return p.a.createElement("td",{className:Ce("",s===t)})})),p.a.createElement("td",null)),p.a.createElement("tr",{className:"row-grey"},p.a.createElement("td",null,p.a.createElement("b",null,"Ending Cash Balance")),ee.map((function(e,t){return p.a.createElement("td",{"data-id":"ecb".concat(t),className:"text-right"},p.a.createElement("b",null,ve(e)))})),p.a.createElement("td",null)))))))))))),p.a.createElement(be,{key:n.length,reportFrequency:k,endDate:n[s],startDate:this.getStartDate(n[s]),handleSideBarExpand:this.handleSideBarExpand}))}}]),t}(p.a.Component);t.default=Object(N.b)((function(e){return{navigationExpanded:e.navigation.openleftnav}}),null)(xe)}}]);
//# sourceMappingURL=16.fb1aec40.chunk.js.map