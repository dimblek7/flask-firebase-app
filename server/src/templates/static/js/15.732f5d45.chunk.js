(this["webpackJsonppayference-fe"]=this["webpackJsonppayference-fe"]||[]).push([[15],{499:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(506);t.a=function(e){var t=e.isfullscreen;return c.a.createElement("div",{className:"card-body w-100 text-center pt-5 mt-5 ".concat(t&&"vh-100")},c.a.createElement(r.a,{animation:"border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))}},501:function(e,t,a){"use strict";var n=a(155),c=a(0),r=a.n(c);t.a=function(e){var t=e.payload.value,a=(e.verticalAnchor,e.visibleTicksCount,Object(n.a)(e,["payload","verticalAnchor","visibleTicksCount"]));return r.a.createElement("text",Object.assign({},a,{style:{fontSize:"0.8rem"},className:"bar-chart-tick",dy:12}),t)}},502:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(58);t.a=function(e){var t=e.active,a=e.payload,n=e.label,o=e.noCurrencyKeys,l=void 0===o?[]:o;return t&&a?c.a.createElement("div",{className:"custom-tooltip bg-white border p-3"},c.a.createElement("p",null,c.a.createElement("strong",null,n)),a.map((function(e,t){var a=l.find((function(t){return t===e.dataKey}));return c.a.createElement("span",{key:t,className:"d-block mb-1"},c.a.createElement("span",{style:{color:e.color}},e.name,": "),c.a.createElement("span",null,"number"===typeof e.value?Object(r.f)(e.value,!a):e.value))}))):null}},504:function(e,t,a){"use strict";var n=a(14),c=a(15),r=a(17),o=a(16),l=a(18),i=a(0),s=a.n(i),u=(a(4),a(147)),d=a.n(u),m=a(21),f=a.n(m),p=a(151),b=a.n(p),D=(a(233),function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).updateDates=function(e,t){a.setState({startDate:f()(e),endDate:f()(t),text:"".concat(f()(e).format("MMM DD, YYYY")," - ").concat(f()(t).format("MMM DD, YYYY"))})},a.getDates=function(e){var t=e.startDate,n=e.endDate,c=e.chosenLabel;a.setState({startDate:t,endDate:n,text:"".concat(f()(t).format("MMM DD, YYYY")," - ").concat(f()(n).format("MMM DD, YYYY"))},(function(){return a.props.getSelectedDates(a.state.startDate,a.state.endDate,c)}))};var c=f()(),l=f()().add(30,"days");return a.state={endDate:l,startDate:c,text:"",showDatePicker:!1},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startDate,a=e.endDate;this.updateDates(t,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.startDate,a=e.endDate;d()(e,this.props)||this.updateDates(t,a)}},{key:"render",value:function(){var e=this,t={Today:[f()(),f()()],"Next 7 Days":[f()(),f()().add(7,"days")],"Next 30 Days":[f()(),f()().add(30,"days")],"Past 7 Days":[f()().subtract(7,"days"),f()()],"Past 30 Days":[f()().subtract(30,"days"),f()()],"Past 90 Days":[f()().subtract(90,"days"),f()()],"Past 365 Days":[f()().subtract(365,"days"),f()()]},a=this.state,n=a.startDate,c=a.endDate,r=a.text,o=a.showDatePicker,l=this.props,i=l.parentEl;l.labelFormat;return s.a.createElement("div",{id:"datepicker-wrap"},o?s.a.createElement(b.a,{parentEl:i,startDate:n,endDate:c,ranges:t,width:"100",showDropdowns:!0,linkedCalendars:!1,format:"MMM DD, YYYY",onApply:function(t,a){e.setState({text:""},(function(){return e.getDates(a)}))},onBlur:function(){return e.setState({showDatePicker:!1})}},s.a.createElement("div",{id:"wrap-date",className:"rounded",style:{background:"#fff",cursor:"pointer",padding:"8px 10px",border:"1px solid #ccc"}},s.a.createElement("i",{id:"fa-calender-real",className:"fa fa-calendar real"}),"\xa0",s.a.createElement("span",null,r))):s.a.createElement("div",{id:"reportrange_view",className:"rounded",style:{background:"#fff",cursor:"pointer",padding:"8px 10px",border:"1px solid #ccc"},onClick:function(){e.setState({showDatePicker:!0},(function(){setTimeout((function(){document.getElementById("fa-calender-real").click()}),100)}))}},s.a.createElement("i",{className:"fa fa-calendar"}),"\xa0",s.a.createElement("span",null,r)))}}]),t}(i.Component));t.a=D},551:function(e,t,a){var n=a(238);e.exports=function(e){return e&&e.length?n(e):[]}},574:function(e,t,a){"use strict";var n=a(4),c=a.n(n),r=a(0),o=a.n(r),l=a(5),i=a.n(l),s=a(145),u=a(58);t.a=function(e){var t=e.status,a=void 0===t?"":t,n=e.total_amount_due,r=void 0===n?0:n,l=e.invoice_amount,d=void 0===l?0:l,m=e.recommendation,f=void 0===m?"":m,p=e.supplier,b=e.customer,D=(e.currency,e.insights),E=void 0===D?"":D,v=e.expected_date,h=void 0===v?"":v,y=e.type,Y=void 0===y?"":y,g=e.date_closed,j="all"===a?"".concat(window.location.origin,"/").concat(Y,"/").concat("customers"===Y?c()(b,"id",""):c()(p,"id",""),"#reports"):"",O=i()("card",{critical:"PAY_IMMEDIATELY"===E},{average:"INVALID_DUE_DATE"===E},{"cursor-pointer":"all"===a});return o.a.createElement("div",{className:O,onClick:function(){return"all"===a?window.open(j,"_blank"):{}}},o.a.createElement("p",{className:"mData"},o.a.createElement("span",{className:"company_name",title:c()(p,"name","")||c()(b,"name","")},c()(p,"name","")||c()(b,"name","")),o.a.createElement("span",{className:"pull-right"},a?Object(u.f)(d):Object(u.f)(r))),o.a.createElement("p",{className:"smData"},"PAY_IMMEDIATELY"===E?"Pay Immediately":Object(s.b)(g||f||h)))}},770:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(14),r=a(15),o=a(17),l=a(16),i=a(43),s=a(18),u=a(19),d=a(93),m=a(4),f=a.n(m),p=a(21),b=a.n(p),D=a(0),E=a.n(D),v=a(12),h=a(73),y=a(6),Y=a(10),g=function(e,t,a){return{type:e,payload:{data:t},isFetching:a}},j=a(58),O=a(42),M=a(7),k=a(504),N=a(68),_=a.n(N),x=(a(11),a(39)),w=a(501),C=a(502),S=a(499),A=a(500),P=[{name:"No Data",value:"300"}],L=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.data;return E.a.createElement(A.n,{width:"100%",height:400},e&&e.length?E.a.createElement(A.f,{width:720,height:440,data:e,margin:{top:8,bottom:8,right:8,left:8},stackOffset:"sign"},E.a.createElement(A.q,{tick:E.a.createElement(w.a,null),scale:"point",dataKey:"date",name:"Date",padding:{left:60,right:60}}),E.a.createElement(A.r,{tickFormatter:function(e){return Object(j.f)(e)},domain:["auto","auto"]}),E.a.createElement(A.p,{cursor:!1,content:E.a.createElement(C.a,null)}),E.a.createElement(A.i,{wrapperStyle:{paddingLeft:50}}),E.a.createElement(A.c,{dataKey:"ar",name:"AR",stackId:"a",barSize:100,fill:"#7ACB36"}),E.a.createElement(A.c,{dataKey:"ap",name:"AP",stackId:"a",barSize:100,fill:"#ED3833"}),E.a.createElement(A.j,{type:"monotone",dataKey:"arvsap",name:"(AR - AP)",stackId:"b",stroke:"#434348",dot:!0})):E.a.createElement(A.d,{width:600,height:300,data:P,margin:{top:5,right:30,left:20,bottom:5}},E.a.createElement(A.c,{dataKey:"value",fill:"#fff"},E.a.createElement(A.h,{dataKey:"name",position:"inside"}))))}}]),t}(E.a.PureComponent),T=function(e){return b()(e,"YYYY-MM-DD").toDate().getTime()};var I=Object(v.b)((function(e){return{}}),{})((function(e){var t=Object(D.useState)(null),a=Object(M.a)(t,2),n=a[0],c=a[1],r=Object(D.useState)("due"),o=Object(M.a)(r,2),l=o[0],i=o[1],s=Object(D.useState)(null),u=Object(M.a)(s,2),d=u[0],m=u[1],p=Object(D.useState)(null),v=Object(M.a)(p,2),h=v[0],g=v[1],j=Object(D.useState)(!0),O=Object(M.a)(j,2),k=O[0],N=O[1],_=e.startDate,x=e.endDate;return Object(D.useEffect)((function(){if(d&&h&&(d[0]||h[0])&&_&&x){var e="recommendation"===l?"recommendation":"due_date",t=b()(_,"MM/DD/YYYY").toDate().getTime(),a=b()(x,"MM/DD/YYYY").toDate().getTime(),n=(a-t)/864e5,r=[];if(0===n)r=[t];else if(1===n)r=[t,a];else if(2===n)r=[t,t+864e5,a];else if(3===n)r=[t,t+864e5,t+1728e5,a];else for(var o=(a-t)/4,i=1;i<=4;)r.push(t+o*i),i+=1;r.map((function(e){return b()(e).format("MM/DD/YY")}));var s=[],u=[];r.forEach((function(n,c){var o=f()(r,"[".concat(c-1,"]"),"")||t-864e5,l=f()(r,"[".concat(c,"]"),"")||a,i=d.filter((function(e){return o<T(e.due_date)&&T(e.due_date)<=l})),m=0;i.forEach((function(e){m+=e.total_amount_due})),s.push(m);var p=h.filter((function(t){return o<T(t[e])&&T(t[e])<=l})),b=0;p.forEach((function(e){b+=e.total_amount_due})),u.push(b)}));var m=s.map((function(e,t){return e-u[t]})),p=r.map((function(e,t){return{date:b()(e).format("MM/DD"),ar:s[t],ap:-u[t],arvsap:m[t]}}));c(p)}}),[d,h,_,x,l]),Object(D.useEffect)((function(){_&&x&&l&&(N(!0),Promise.all([y.a.get(encodeURI("arinvoice?per_page=3000&from_date='".concat(_,"'&to_date='").concat(x,"'&status=open&date_type=").concat(l))),y.a.get(encodeURI("apinvoice?per_page=3000&from_date='".concat(_,"'&to_date='").concat(x,"'&status=open&date_type=").concat(l)))]).then((function(e){N(!1),m(f()(e[0],"data.result",[])),g(f()(e[1],"data.result",[]))})).catch((function(e){return Object(Y.a)(e)})))}),[_,x,l]),E.a.createElement("div",{className:"mt-5"},E.a.createElement("h1",{className:"h2 tb-border"},"AR vs AP"),E.a.createElement("ul",{id:"sideTabBar",className:"nav nav-tabs"},E.a.createElement("li",{onClick:function(){"due"!==l&&(m(null),g(null),c(null),i("due"))},className:"cursour-pointer ".concat("due"===l&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"Due Date")),E.a.createElement("li",{onClick:function(){"recommendation"!==l&&(m(null),g(null),c(null),i("recommendation"))},className:"cursour-pointer ".concat("recommendation"===l&&"active"),id:"rece","data-id":"rListing"},E.a.createElement("span",null,"PayIQ"))),E.a.createElement("div",{className:"w-100"},k?E.a.createElement("div",{style:{width:"100%",height:440}},E.a.createElement(S.a,null)):E.a.createElement(L,{data:n})))})),R=a(551),F=a.n(R),B=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lines,a=void 0===t?[]:t,n=e.data,c=void 0===n?[]:n,r=!1,o=a.map((function(e,t){return E.a.createElement(A.j,{type:"monotone",dataKey:e,name:e,stroke:K[t%8],dot:!1})}));return E.a.createElement(A.n,{width:"100%",height:400,onMouseEnter:function(){return r=!0},onMouseLeave:function(){return r=!1}},E.a.createElement(A.k,{width:720,height:440,data:c,margin:{top:8,bottom:8,right:8}},E.a.createElement(A.q,{tick:E.a.createElement(w.a,null),dataKey:"date",minTickGap:40,tickCount:4,type:"category"}),E.a.createElement(A.r,{tickFormatter:function(e){return Object(j.f)(e)}}),E.a.createElement(A.p,{active:r,cursour:!1,content:E.a.createElement(C.a,null)}),E.a.createElement(A.i,{max:!0}),o))}}]),t}(E.a.PureComponent),K=["#3FA2CC","#DB504D","#7CA82D","#EF853A","#424348","#90ED7D","#3C861F","#F9D7E0"],U=function(e){return b()(e,"YYYY-MM-DD").toDate().getTime()};var V=Object(v.b)((function(e){return{}}),{})((function(e){var t=e.selectedaccounts,a=Object(D.useState)([]),n=Object(M.a)(a,2),c=n[0],r=n[1],o=Object(D.useState)({}),l=Object(M.a)(o,2),i=l[0],s=l[1],u=Object(D.useState)("7days"),d=Object(M.a)(u,2),m=d[0],p=d[1],v=Object(D.useState)([]),h=Object(M.a)(v,2),g=(h[0],h[1]),j=Object(D.useState)(null),k=Object(M.a)(j,2),N=k[0],_=k[1],x=b()().format("MM/DD/YYYY");return Object(D.useEffect)((function(){N&&x&&function(e,a){var n=encodeURI("bankbalance?from_date='".concat(e,"'&to_date='").concat(a,"'"));y.a.get(n).then((function(e){var a=0,n=0,c=e.data.result;c=t[0]?c.filter((function(e){return t.find((function(t){return t.id===e.bank_account_id}))})):c;var o=F()(c.map((function(e){return U(e.date)})).sort().filter((function(e){return e&&NaN!==e}))),l=[];function i(e,t){var r=[];return o.forEach((function(e){var o=c.filter((function(a){return e===U(a.date)&&(!t||a.bank_account_id===t)})),l=0;o.forEach((function(e){l+=e.amount,n=l<n?n:l,a=l>a?a:l})),r.push([e,l])})),{values:r,"line-color":"#0000ff",text:e}}var u=(l=t[0]?1===t.length?Object(O.a)(t.map((function(e){return i(e.name,e.id)}))):[i("Total balance")].concat(Object(O.a)(t.map((function(e){return i(e.name,e.id)})))):[i("All Accounts")]).map((function(e){return e.text})),d=[];f()(l,"[0].values",[]).map((function(e,t){var a={date:b()(e[0]).format("MM/DD/YYYY")};u.forEach((function(e,n){var c=l.find((function(t){return t.text===e}));a[e]=c?c.values[t][1]:0})),d.push(a)})),r(u),g(l),s(d)})).catch((function(e){return Object(Y.a)(e)}))}(N,x)}),[N,x,t]),Object(D.useEffect)((function(){!N&&_(b()().subtract(7,"days").format("MM/DD/YYYY"))}),[N]),Object(D.useEffect)((function(){switch(m){case"7days":_(b()().subtract(7,"days").format("MM/DD/YYYY"));break;case"30days":_(b()().subtract(30,"days").format("MM/DD/YYYY"));break;case"6months":_(b()().subtract(6,"months").format("MM/DD/YYYY"));break;case"1year":_(b()().subtract(1,"years").format("MM/DD/YYYY"));break;case"3year":_(b()().subtract(3,"years").format("MM/DD/YYYY"))}}),[m]),E.a.createElement("div",{className:"mt-5"},E.a.createElement("h1",{className:"h2 tb-border"},"Bank Balance"),E.a.createElement("div",{className:"row"},E.a.createElement("ul",{id:"sideTabBar",className:"nav nav-tabs",style:{marginLeft:16,marginTop:8}},E.a.createElement("li",{onClick:function(){return p("7days")},className:"cursour-pointer ".concat("7days"===m&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"7 Days")),E.a.createElement("li",{onClick:function(){return p("30days")},className:"cursour-pointer ".concat("30days"===m&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"30 Days")),E.a.createElement("li",{onClick:function(){return p("6months")},className:"cursour-pointer ".concat("6months"===m&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"6 Months")),E.a.createElement("li",{onClick:function(){return p("1year")},className:"cursour-pointer ".concat("1year"===m&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"1 Year")),E.a.createElement("li",{onClick:function(){return p("3years")},className:"cursour-pointer ".concat("3years"===m&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"3 Years")))),E.a.createElement("div",{className:"w-100"},E.a.createElement(B,{data:i,lines:c})))})),X=a(145),q=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.data;return E.a.createElement(A.n,{width:"100%",height:400},E.a.createElement(A.k,{width:720,height:440,data:e,margin:{top:8,bottom:8,right:8}},E.a.createElement(A.q,{tick:E.a.createElement(w.a,null),dataKey:"date",minTickGap:40,type:"category"}),E.a.createElement(A.r,{interval:"preserveStartEnd",tickFormatter:function(e){return Object(j.f)(e,!0,1)}}),E.a.createElement(A.p,{cursor:!1,content:E.a.createElement(C.a,null)}),E.a.createElement(A.i,null),E.a.createElement(A.j,{type:"monotone",dataKey:"payIQ",name:"PayIQ",stroke:"#3FA2CD",dot:!1}),E.a.createElement(A.j,{type:"monotone",dataKey:"due",name:"Due",stroke:"#D4312C",dot:!1})))}}]),t}(E.a.PureComponent),Q=function(e){return b()(e,"YYYY-MM-DD").toDate().getTime()},z=function(e){var t=Object(D.useState)(null),a=Object(M.a)(t,2),n=a[0],c=a[1],r=Object(D.useState)(null),o=Object(M.a)(r,2),l=o[0],i=o[1],s=Object(D.useState)(null),u=Object(M.a)(s,2),d=u[0],m=u[1],p=Object(D.useState)([]),v=Object(M.a)(p,2),h=v[0],g=v[1],j=e.startDate,k=e.endDate,N=e.selectedaccounts;return Object(D.useEffect)((function(){if(j&&k){var e=Object(X.d)({str:j}),t=Object(X.d)({str:b()().subtract("days",30).format("MM/DD/YYYY")}),a=e>t?t:e,n=encodeURI("bankbalance?from_date='".concat(Object(X.e)({ts:a}),"'&to_date='").concat(k,"'"));y.a.get(n).then((function(e){var t=f()(e,"data.result",[]);t=N[0]?t.filter((function(e){return N.find((function(t){return t.id===e.bank_account_id}))})):t,g(t)})).catch((function(e){return Object(Y.a)(e)}))}}),[j,k,N]),Object(D.useEffect)((function(){j&&k&&y.a.get(encodeURI("arinvoice?per_page=4000&from_date=".concat(j,"&to_date=").concat(k,"&status=open"))).then((function(e){i(f()(e,"data.result",[]))})).catch((function(e){return Object(Y.a)(e)}))}),[j,k]),Object(D.useEffect)((function(){j&&k&&y.a.get(encodeURI("apinvoice?per_page=4000&from_date=".concat(j,"&to_date=").concat(k,"&status=open"))).then((function(e){m(f()(e,"data.result",[]))})).catch((function(e){return Object(Y.a)(e)}))}),[j,k]),Object(D.useEffect)((function(){l&&d&&h&&j&&k&&function(){Object(X.d)({str:j});for(var e=Object(X.d)({str:k}),t=h.filter((function(e){return e.amount})).map((function(e){return Q(e.date)})).sort()[0],a=F()([].concat(Object(O.a)(l.map((function(e){return Q(e.due_date||e.date_closed)}))),Object(O.a)(d.map((function(e){return Q(e.due_date||e.date_closed)})))).sort().filter((function(e){return e&&!isNaN(e)})).filter((function(a){return a>=t&&a<=e}))),n=0,r=0,o="";r<a.length;){var i=h.find((function(e){return Q(e.date)===a[r]}));i&&(o=Q(i.date),r=a.length),r++}if(!o){var s=h.filter((function(e){return e.amount})).map((function(e){return Q(e.date)})).sort().reverse();o=s[0]}console.log("xmindate2: ",b()(o).format("MM/DD/YYYY")),h.forEach((function(e){Q(e.date)===o&&(n+=e.amount)})),console.log("initbalance: normal ",n);var u=[[o,n]],m=[[o,n]];if(a.forEach((function(e,t){var a;if(h.filter((function(t){return e===Q(t.date)})).forEach((function(e){a=(a||0)+e.amount})),0!==t||j===k){var c=l.filter((function(t){return e===Q(t.due_date||t.date_closed)})),r=0;c.forEach((function(e){r+=e.total_amount_due}));var o,i=d.filter((function(t){return e===Q(t.due_date||t.date_closed)})),s=0;i.forEach((function(e){s+=e.total_amount_due})),o=a?a||0:f()(u,"[".concat(t-1,"][",1,"]"),n)+r-s,u.push([e,o])}})),a.forEach((function(e,t){var a;if(h.filter((function(t){return e===Q(t.date)})).forEach((function(e){a=(a||0)+e.amount})),0!==t||j===k){var c=l.filter((function(t){return e===Q(t.due_date)})),r=0;c.forEach((function(e){r+=e.total_amount_due}));var o,i=d.filter((function(t){return e===Q(t.recommendation||t.due_date)})),s=0;i.forEach((function(e){s+=e.total_amount_due})),o=a?a||0:f()(m,"[".concat(t-1,"][",1,"]"),n)+r-s,m.push([e,o])}})),e!==u[u.length-1][0]&&(u=[].concat(Object(O.a)(u),[[e,u[u.length-1][1]]])),e!==m[m.length-1][0]&&(m=[].concat(Object(O.a)(m),[[e,m[m.length-1][1]]])),j===k){var p=u.length-1;o=u[p][0]-864e5,u[p][0]-864e5,e=u[p][0]+864e5,u=[u[p]],m=[m[p]]}var D=u.map((function(e,t){return{date:b()(e[0]).format("MM/DD"),due:e[1],payIQ:m[t][1]}}));c(D)}()}),[l,d,h,j,k]),E.a.createElement("div",{className:"mt-2"},E.a.createElement("h1",{className:"h2"},"Liquidity Snapshot"),E.a.createElement("div",{className:"my-2 mt-4"},n?E.a.createElement(q,{data:n}):E.a.createElement("div",{style:{width:"100%",height:440}},E.a.createElement(S.a,null))))},G=function(e){var t=Object(D.useState)(!1),a=Object(M.a)(t,2),n=a[0],c=a[1],r=Object(D.useState)(!1),o=Object(M.a)(r,2),l=o[0],i=o[1],s=Object(D.useState)([]),u=Object(M.a)(s,2),d=u[0],m=u[1],p=Object(D.useState)([]),v=Object(M.a)(p,2),h=v[0],g=v[1],j=e.startDate,N=e.endDate,w=e.expand;return Object(D.useEffect)((function(){y.a.get("/bankaccount").then((function(e){m(f()(e,"data.result",[]))})).catch((function(e){return Object(Y.a)(e)}))}),[]),E.a.createElement("div",{className:"hide-scroll graph-wrapper pl-0 ".concat(w?"col-md-9 pr-1":"col-md-11 dashboard-expanded")},E.a.createElement("div",{className:"card"},E.a.createElement("div",{className:"card-body pt-0"},E.a.createElement("div",{className:"row mt-4"},E.a.createElement("div",{className:"col-md-4"},E.a.createElement("div",{className:"dropdown",style:{padding:5}},E.a.createElement("span",{className:"dropdown-toggle all-account cursour-pointer",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return c(!0)}},h[0]?h[1]?"Accounts(".concat(h.length,")"):h[0].name:"All Accounts"),E.a.createElement(x.a,{onClickAway:c},E.a.createElement("div",{className:"cursour-pointer dropdown-menu hide-scroll ".concat(n?"show":""),style:{maxHeight:"50vh",overflowY:"scroll"},"aria-labelledby":"dropdownMenuLink",id:"companylist"},E.a.createElement("span",{onClick:function(){g([])}},E.a.createElement("input",{type:"checkbox",className:"mr-2",name:"All accounts",checked:!h[0]}),"All Accounts"),d.map((function(e){var t=h.find((function(t){return t.id===e.id}));return E.a.createElement("span",{style:{background:t?"#eee":null},onClick:function(){var a=t?h.filter((function(t){return t.id!==e.id})):[].concat(Object(O.a)(h),[e]);g(_()(a,"name"))}},E.a.createElement("input",{type:"checkbox",className:"mr-2",name:e.name,checked:t}),e.name)})))))),E.a.createElement("div",{className:"col-md-8"},E.a.createElement("div",{className:"dropdown float-right"},E.a.createElement("span",{className:"btn dropdown-toggle btn-primary",href:"#",role:"button",id:"export","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return i(!0)}},"Export"),E.a.createElement(x.a,{onClickAway:i},E.a.createElement("div",{className:"dropdown-menu dropdown-menu-right ".concat(l?"show":""),"aria-labelledby":"dropdownMenuLink",id:"exportlist"},E.a.createElement("span",{onClick:e.exportCsv},"Export CSV"),E.a.createElement("span",{onClick:e.exportExcel},"Export Excel")))),E.a.createElement("div",{className:"single-date-picker pull-right"},E.a.createElement(k.a,{startDate:b()(j),endDate:b()(N),getSelectedDates:e.getDates})))),E.a.createElement("div",{className:"hide-scroll",style:{height:"74vh",overflowY:"auto"}},j&&N&&E.a.createElement(z,{startDate:j,endDate:N,selectedaccounts:h}),j&&N&&E.a.createElement(I,{history:e.history,startDate:j,endDate:N,selectedaccounts:h}),j&&N&&E.a.createElement(V,{history:e.history,startDate:j,endDate:N,selectedaccounts:h})))))},J=a(574),W=a(779),H=a(766),Z=function(e){var t=e.startDate,a=e.endDate,n=e.getPayableData,c=e.getReceivableData,r=e.payablesData,o=e.receivablesData,l=e.expand,i=e.handleExpand,s=e.isFetching,u=Object(D.useState)(t),d=Object(M.a)(u,2),m=d[0],f=d[1],p=Object(D.useState)("payables"),v=Object(M.a)(p,2),h=v[0],y=v[1];function Y(e){var t="";"next"===e&&(t=b()(m).add(1,"days").format("MM/DD/YYYY")),"prev"===e&&(t=b()(m).subtract(1,"days").format("MM/DD/YYYY")),f(t),n(t,t),c(t,t)}function g(e){h!==e&&y(e)}Object(D.useEffect)((function(){t&&a&&h&&s&&(n(t,a),c(t,a),f(t))}),[h,t]);var j="payables"===h?r:o;return E.a.createElement(E.a.Fragment,null,l?E.a.createElement("div",{className:"col-md-1 dashboard-sidebar-collapsed-wrap"},E.a.createElement("div",{className:"card"},E.a.createElement("div",{className:"leftbaricon",onClick:function(){i(l)}},E.a.createElement(W.a,{placement:"left",overlay:E.a.createElement(H.a,null,"Expand")},E.a.createElement("i",{className:"fa fa-chevron-left"}))),E.a.createElement("div",null,E.a.createElement("div",{onClick:function(){i(l),g("payables")}},E.a.createElement(W.a,{placement:"left",overlay:E.a.createElement(H.a,null,"Payables")},E.a.createElement("i",{className:"onlyicon fas fa-file-invoice-dollar cursor-pointer","aria-hidden":"true"}))),E.a.createElement("div",{onClick:function(){i(l),g("receiveable")}},E.a.createElement(W.a,{placement:"left",overlay:E.a.createElement(H.a,null,"Receivables")},E.a.createElement("i",{className:"onlyicon fas fa-hand-holding-usd cursor-pointer","aria-hidden":"true"})))))):E.a.createElement("div",{className:"col-md-3 hide-scroll dashboard-sidebar"},E.a.createElement("div",{className:"leftbaricon",onClick:function(){i(l)}},E.a.createElement(W.a,{placement:"left",overlay:E.a.createElement(H.a,null,"Collapse")},E.a.createElement("i",{className:"fa fa-chevron-right"}))),E.a.createElement("div",null,E.a.createElement("div",{className:"card"},E.a.createElement("div",{className:"card-body"},E.a.createElement("div",{className:"pb-2"},E.a.createElement("div",{className:"text-center pb-1"},E.a.createElement("i",{className:"fa fa-angle-left",onClick:function(){return Y("prev")},id:"prevDate","aria-hidden":"true"}),E.a.createElement("span",{id:"showDate"},b()(m).format("ddd, DD MMM, YYYY")),E.a.createElement("i",{className:"fa fa-angle-right",id:"nextDate","aria-hidden":"true",onClick:function(){return Y("next")}})),E.a.createElement("div",null,E.a.createElement("ul",{id:"sideTabBar",className:"nav nav-tabs mb-0 mt-3"},E.a.createElement("li",{onClick:function(){return g("payables")},className:"cursour-pointer w-50 text-center ".concat("payables"===h&&"active"),id:"paya","data-id":"pListing"},E.a.createElement("span",null,"Payables")),E.a.createElement("li",{onClick:function(){return g("receiveable")},className:"cursour-pointer w-50 text-center ".concat("receiveable"===h&&"active"),id:"rece","data-id":"rListing"},E.a.createElement("span",null,"Receivables"))))),E.a.createElement("div",{className:"hide-scroll sidebar-listing-scroll"},E.a.createElement("div",{id:"pLisitng",className:"pLisitng cTab"},s?E.a.createElement("span",null,"Loading"):null,j.length?j.map((function(e){return E.a.createElement(J.a,e)})):s?null:E.a.createElement("span",null,"No Data"))))))))},$={Today:1,"Next 7 Days":7,"Next 30 Days":30,"Past 7 Days":7,"Past 30 Days":30},ee=function(){var e="DEV"===u.a.MODE?"Next 7 Days":"Next 30 Days";switch(localStorage.getItem("dashboardrange")||e){case"Today":return{startDate:b()().format("MM/DD/YYYY"),endDate:b()().format("MM/DD/YYYY")};case"Next 30 Days":return{startDate:b()().format("MM/DD/YYYY"),endDate:b()().add(30,"days").format("MM/DD/YYYY")};case"Next 7 Days":return{startDate:b()().format("MM/DD/YYYY"),endDate:b()().add(7,"days").format("MM/DD/YYYY")};case"Past 7 Days":return{startDate:b()().subtract(7,"days").format("MM/DD/YYYY"),endDate:b()().format("MM/DD/YYYY")};case"Past 30 Days":return{startDate:b()().subtract(30,"days").format("MM/DD/YYYY"),endDate:b()().format("MM/DD/YYYY")};default:return{endDate:b()().add(30,"days").format("MM/DD/YYYY"),startDate:b()().format("MM/DD/YYYY")}}},te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).storageChange=function(e){if("dashboardrange"===e.key&&""===e.newValue){var t=Object(n.a)({},ee());a.setState(t)}},a.toggleExpandCollapse=function(e){a.setState({toggleExpand:e})},a.ExportXLSX=function(){var e=a.props,t=e.payablesData,n=e.receivablesData,c="dashboard".concat(b()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),r={Sheets:{Payables:h.utils.json_to_sheet(a.ExportCSV(t,"payable")),Receivables:h.utils.json_to_sheet(a.ExportCSV(n,""))},SheetNames:["Payables","Receivables"]},o=h.write(r,{bookType:"xlsx",type:"array"}),l=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});d.saveAs(l,c)},a.ExportCSV=function(e,t){return"payable"===t?e.map((function(e){return{Supplier:f()(e,"supplier.name",""),InvoiceNo:f()(e,"invoice_number",""),DueDate:b()(f()(e,"due_date","")).format("MM/DD/YYYY"),Recommendation:f()(e,"recommendation",""),InvoiceDate:b()(f()(e,"invoice_date","")).format("MM/DD/YYYY"),AmountDue:Object(j.b)(f()(e,"total_amount_due",0))}})):e.map((function(e){return{CustomerName:f()(e,"customer.name",""),InvoiceNo:f()(e,"invoice_number",""),DueDate:b()(f()(e,"due_date","")).format("MM/DD/YYYY"),AmountDue:Object(j.b)(f()(e,"total_amount_due",0)),InvoiceDate:b()(f()(e,"invoice_date","")).format("MM/DD/YYYY"),Status:f()(e,"status","")}}))},a.getDates=function(e,t,n){var c=b()(e).format("MM/DD/YYYY"),r=b()(t).format("MM/DD/YYYY");a.setState({startDate:null,endDate:null,interval:$[n||30]},(function(){a.setState({startDate:c,endDate:r}),a.props.getPayableData(c,r),a.props.getReceivableData(c,r)})),localStorage.setItem("dashboardrange",n)},a.storageChange=a.storageChange.bind(Object(i.a)(a)),a.state=Object(n.a)({},ee(),{interval:30,toggleExpand:!1}),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.title="Dashboard - Payference",this.setState(Object(n.a)({},ee())),document.body.classList.add("overflow-hidden"),window.scrollTo(0,0),window.addEventListener("storage",this.storageChange)}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("overflow-hidden"),window.removeEventListener("storage",(function(){}))}},{key:"render",value:function(){var e=this.state,t=e.startDate,a=e.endDate,n=e.interval,c=e.toggleExpand,r=this.props,o=r.payablesData,l=r.receivablesData,i=r.history,s=r.getPayableData,u=r.getReceivableData,d=r.isFetching;return E.a.createElement("div",{className:"row px-15",id:"dashboardBody"},E.a.createElement(G,Object.assign({},this.props,{startDate:t,endDate:a,getDates:this.getDates,exportExcel:this.ExportXLSX,exportCsv:this.ExportXLSX,expand:c,handleExpand:this.toggleExpandCollapse})),E.a.createElement(Z,{expand:!c,endDate:a,history:i,interval:n,startDate:t,isFetching:d,payablesData:o,handleExpand:this.toggleExpandCollapse,getPayableData:s,receivablesData:l,getReceivableData:u}))}}]),t}(E.a.Component),ae={getPayableData:function(e,t){return function(a){var n="upcomingpayment?from_date=".concat(e,"&to_date=").concat(t,"&status=open&date_type=all");return a(g("SET_PAYABLE_DATA",[],!0)),y.a.get(n).then((function(e){e&&e.data&&a(g("SET_PAYABLE_DATA",e.data.result,!1))})).catch((function(e){return Object(Y.a)(e)}))}},getReceivableData:function(e,t){return function(a){var n="upcomingreceipt?from_date=".concat(e,"&to_date=").concat(t,"&status=open&date_type=all");return a(g("SET_RECEIVABLE_DATA",[],!0)),y.a.get(n).then((function(e){e&&e.data&&a(g("SET_RECEIVABLE_DATA",e.data.result,!1))})).catch((function(e){return Object(Y.a)(e)}))}}};t.default=Object(v.b)((function(e){return{isFetching:e.dashboard.isFetching,payablesData:e.dashboard.payablesData,receivablesData:e.dashboard.receivablesData}}),ae)(te)}}]);
//# sourceMappingURL=15.732f5d45.chunk.js.map