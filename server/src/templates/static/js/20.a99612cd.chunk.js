(this["webpackJsonppayference-fe"]=this["webpackJsonppayference-fe"]||[]).push([[20],{768:function(e,t,a){"use strict";a.r(t);var n=a(7),c=(a(150),a(0)),r=a.n(c),l=a(12),o=a(66),s=a(622),i=a(3),u=a(42),m=(a(503),a(549)),d=a.n(m),f=a(39),p=a(154),b=a(508),E=a(537),h=a(529),g=a(499),v=a(13),y=a(30),N=a(93),_=a(160),O=a(10),j=a(4),D=a.n(j),Y=a(21),w=a.n(Y),x=a(11),M=a(579),S=a(94),k=a(74),C=a(500),A=a(58),P=a(145),R=a(73),T=a(6),I=a(9),F=a(14),L=a(15),B=a(17),K=a(16),H=a(43),z=a(18),U=a(95),V=a.n(U),W=[{name:"Pending Fulfillment",dataindex:0,urlkey:"pending_fulfillment",value:300},{name:"Partially fulfilled",dataindex:1,urlkey:"partially_fulfilled",value:300}],Q=function(e){var t=e.cx,a=e.cy,n=e.innerRadius,c=e.outerRadius,l=e.startAngle,o=e.endAngle,s=e.fill;return r.a.createElement("g",null,r.a.createElement(C.o,{className:"cursour-pointer",cx:t,cy:a,innerRadius:n,outerRadius:c+5,startAngle:l,endAngle:o,fill:s}))},q=function(e){var t=e.data,a=e.onRecordClick,l=e.total,o=e.selectedStatusObject,s=Object(c.useState)(null),i=Object(n.a)(s,2),u=i[0],m=i[1];return Object(c.useEffect)((function(){(D()(o,"dataindex",null)||0===D()(o,"dataindex",null))&&m(D()(o,"dataindex",null))}),[o]),r.a.createElement(C.m,{width:320,height:320},r.a.createElement(C.l,{animationDuration:1e3,activeIndex:u,activeShape:Q,data:t,innerRadius:60,outerRadius:140,fill:"#8884d8",dataKey:"value",onClick:function(e){a(e.payload.payload)},onMouseEnter:function(e,t){m(t)},onMouseLeave:function(e,t){m(D()(o,"dataindex",null))}},r.a.createElement(C.g,{className:"cursour-pointer",width:30,position:"center",onClick:function(){return a(null)}},"Total ".concat(Object(A.f)(l))),t.map((function(e,t){return r.a.createElement(C.e,{className:"cursour-pointer",fill:J[t%J.length]})}))))},J=["#2B7EF6","#7CA82D","#EF853A","#DB504D","#424348","#90ED7D","#3C861F","#F9D7E0"],G={Today:1,"Next 7 Days":7,"Next 30 Days":30,"Past 7 Days":7,"Past 30 Days":30};function Z(e){return e.length?e.map((function(e){return{OrderId:D()(e,"document_number",""),Customer:D()(e,"customer.name",""),Description:D()(e,"description",""),Date:w()(D()(e,"date","")).format("MM/DD/YYYY"),Amount:Object(A.b)(D()(e,"total_amount_open",0)),Status:D()(e,"status","")}})):[{OrderId:"",Customer:"",Description:"",Date:"",Amount:"",Status:""}]}var X=function(e){function t(){var e;return Object(F.a)(this,t),(e=Object(B.a)(this,Object(K.a)(t).call(this))).onReset=function(){document.getElementById("filter-form").reset(),e.setState({endDate:w()().format("MM/DD/YYYY"),startDate:w()().subtract(365,"days").format("MM/DD/YYYY"),sentiment:"",status:"all",dateType:"order",customerSelect:null,currPage:1,customerList:[],invoiceSelect:null,category:0,selectedEntity:null,selectedStatusObject:null},(function(){e.getData(),e.getClassificationData()}))},e.exportAllData=function(t){var a=e.props.customerid,n="orderbacklog?per_page=2000&customer_id=".concat(a);T.a.get(n).then((function(a){var n=[];D()(a,"data.result",[]).forEach((function(e){D()(e,"order_lines[0]","")?D()(e,"order_lines",[]).forEach((function(t){n.push(Object(i.a)({},e,{description:t.description,ol_amount_open:t.amount_open}))})):n.push(Object(i.a)({},e,{description:"-"}))})),e.setState({exportedData:n,showexport:!1},(function(){!0===t?e.refs.csv.link.click():function(e){var t="Order backlog, ".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),a={Sheets:{data:R.utils.json_to_sheet(e)},SheetNames:["data"]},n=R.write(a,{bookType:"xlsx",type:"array"}),c=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});N.saveAs(c,t)}(Z(n))}))})).catch((function(e){return Object(O.a)(e)}))},e.setNextPage=function(){e.setState({currPage:e.state.currPage+1},e.filterData)},e.getallentities=function(){T.a.get("/payroll/setting").then((function(t){e.setState({allentities:D()(t,"data.result",[])})})).catch((function(e){return Object(O.a)(e)}))},e.setPrevPage=function(){e.setState({currPage:1===e.state.currPage?1:e.state.currPage-1},e.filterData)},e.setDates=function(t,a,n){e.setState({startDate:w()(t).format("MM/DD/YYYY"),endDate:w()(a).format("MM/DD/YYYY"),interval:G[n||30],showFilter:!0})},e.filterData=function(){e.setState({showFilter:!1});var t=e.state,a=t.startDate,n=t.endDate,c=t.customerSelect,r=t.sentiment,l=t.currPage,o=t.invoiceSelect,s=t.dateType,i=t.selectedEntity,u="",m={currPage:l};o?(m.invoiceSelect=o,u+="&order_id=".concat(o.name)):c?(m.customerSelect=c,u+="&customer_id=".concat(c.id)):(a&&n&&(m.startDate=a,m.endDate=n,u+="&from_date='".concat(a,"'&to_date='").concat(n,"'")),i&&(u+="&corp_entity_id=".concat(i)),r&&(m.sentiment=r,u+="&sentiment=".concat(r)),s&&(m.dateType=s,u+="&date_type='".concat(s,"'")),c&&(m.customerSelect=c,u+="&customer_id=".concat(c.id))),localStorage.setItem("backlogFilters",JSON.stringify(m)),e.getData(u),e.getClassificationData(u)},e.getData=function(t){var a=e.props.customerid,n=e.state.status,c="orderbacklog?customer_id=".concat(a);if(n){c+="&status='".concat(n,"'");var r=W.find((function(e){return e.urlkey===n}));e.setState({selectedStatusObject:r})}e.setState({isFetching:!0}),T.a.get(c).then((function(t){e.setState({isFetching:!1,isFetchingOriginal:!1});var a=[];D()(t,"data.result",[]).forEach((function(e){D()(e,"order_lines[0]","")?D()(e,"order_lines",[]).forEach((function(t){a.push(Object(i.a)({},e,{description:t.description,ol_amount_open:t.amount_open}))})):a.push(Object(i.a)({},e,{description:"-"}))})),e.setState({rows:a,originalRows:a,showFilter:!1})})).catch((function(t){e.setState({isFetching:!1,showFilter:!1}),t&&Object(O.a)(t)}))},e.getClassificationData=function(t){var a=e.props.customerid,n="orderbacklog/total?customer_id=".concat(a);Promise.all([T.a.get(n),T.a.get("".concat(n,"&status=pending_fulfillment")),T.a.get("".concat(n,"&status=partially_fulfilled"))]).then((function(t){e.setState({total:t[0].data.total,pending_fulfillment_amount:t[1].data.total,partially_fulfilled_amount:t[2].data.total,showDonut:!0})}))},e.setshowExport=function(t){e.setState({showexport:t})},e.searchCustomer=function(t,a){var n,c="orderbacklog/search?".concat(a,"=").concat(t);t?(e.setState((n={},Object(I.a)(n,"is".concat(a,"Fetching"),!0),Object(I.a)(n,"customerList",[]),Object(I.a)(n,"customerSelect","customer"===a?null:e.state.customerSelect),Object(I.a)(n,"invoiceSelect","document"===a?null:e.state.invoiceSelect),n)),T.a.get(c).then((function(t){e.setState(Object(I.a)({customerList:t.data.result},"is".concat(a,"Fetching"),!1))})).catch((function(e){return Object(O.a)(e)}))):e.setState({customersList:[]})},e.setshowFilter=function(t){e.setState({showFilter:t})},e.debounceMethod=V()(e.searchCustomer.bind(Object(H.a)(e)),500),e.state={rows:[],originalRows:[],showFilter:!1,showexport:!1,currPage:1,isFetching:!0,isFetchingOriginal:!0,endDate:w()().format("MM/DD/YYYY"),startDate:w()().subtract(365,"days").format("MM/DD/YYYY"),interval:30,customerId:"",sentiment:"",dateType:"order",status:"all",invoiceSelect:null,customerList:[],customerSelect:null,iscustomerFetching:!1,isinvoiceFetching:!1,exportedData:[],dateModalType:"",showDateModal:!1,allentities:[],selectedEntity:null,pending_fulfillment_amount:null,partially_fulfilled_amount:null},e}return Object(z.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.getData(),this.getClassificationData(),this.getallentities(),window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeKey,n=t.setactiveKey,c=this.state,l=c.rows,o=c.total,s=(c.status,c.endDate,c.currPage),m=(c.startDate,c.showFilter,c.showexport),d=c.isFetching,p=(c.allentities,c.customerList,c.invoiceSelect,c.pending_fulfillment_amount),E=c.partially_fulfilled_amount,y=(c.dateType,D()(l,"[0]","")&&!l.find((function(e){return!e.isselected}))),N=[{Header:r.a.createElement("input",{className:"md-checkbox",onClick:function(){var t=!y;e.setState({rows:Object(u.a)(l.map((function(e){return Object(i.a)({},e,{isselected:t})})))})},type:"checkbox",checked:!!y}),accessor:"isselected",Cell:function(t){return r.a.createElement("div",null,r.a.createElement("input",{onClick:function(a){a.stopPropagation();var n=!t.value,c=Object(u.a)(l);c[t.index].isselected=n,e.setState({rows:c})},className:"md-checkbox",style:{marginLeft:15},type:"checkbox",checked:!!t.value}))},sortable:!1,filterable:!1,width:50},{Header:function(){return r.a.createElement("span",null,"Order Id",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"document_number",width:120,Cell:function(e){return r.a.createElement("div",{data:{id:D()(e,"original.id",""),type:"invoice"}},r.a.createElement("span",{className:"ml-2"},D()(e,"original.document_number","")))}},{Header:function(){return r.a.createElement("span",null,"Customer",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},width:150,accessor:"customer.name",Cell:function(e){return r.a.createElement("div",{data:{id:D()(e,"original.customer.id",""),type:"customer"}},r.a.createElement("span",null,D()(e,"original.customer.name","")))}},{Header:function(){return r.a.createElement("span",null,"Description",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"description",Cell:function(e){return D()(e,"value","-")}},{Header:function(){return r.a.createElement("span",null,"Invoice Date",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"expected_invoice_date",Cell:function(e){return Object(P.b)(D()(e,"value",""))||"-"}},{Header:function(){return r.a.createElement("span",null,"Order Date",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"date",Cell:function(e){return Object(P.b)(D()(e,"value",""))||"-"}},{Header:function(){return r.a.createElement("span",null,"Amount",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"total_amount_open",width:80,className:"text-right pr-2",Cell:function(e){return Object(A.c)(Math.round(D()(e,"original.ol_amount_open",0)||D()(e,"original.total_amount_open",0)))}},{Header:function(){return r.a.createElement("span",null,"Status",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"status",Cell:function(e){return D()(e,"original.status","-")}}],_=this.state,O=(_.customerSelect,_.iscustomerFetching,_.isinvoiceFetching,_.exportedData),j=_.selectedStatusObject,Y=_.showDateModal,x=_.dateModalType,C=_.showDonut,R=l&&l.find((function(e){return e.isselected})),F=C&&[{name:"Pending Fulfillment",dataindex:0,urlkey:"pending_fulfillment",value:p},{name:"Partially Fulfilled",dataindex:1,urlkey:"partially_fulfilled",value:E}],L=R?{TheadComponent:function(){return r.a.createElement("div",null)}}:{},B={Invoice:"expected_invoice_date",PayIQ:"expected_payment_date",Due:"expected_due_date"};return r.a.createElement("div",{className:""},r.a.createElement(b.a,{header:"Update ".concat(x," Date"),show:Y,handleClose:function(){return e.setState({showDateModal:!1})},handleSubmit:function(t){var a=l.filter((function(e){return e.isselected})).map((function(e){return T.a.put("/orderbacklog?id=".concat(e.id),Object(I.a)({},D()(B,"".concat(x),""),w()(t).format("MM/DD/YYYY")))}));Promise.all(a).then((function(){Object(v.a)("Updated successfully","success"),e.getData(),e.setState({dateModalType:"",showDateModal:!1})}))}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pl-5"},F?o?r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{onRecordClick:function(t){e.setState({selectedStatusObject:t,status:D()(t,"urlkey","")},(function(){return e.filterData()}))},data:F,total:o,selectedStatusObject:j}),r.a.createElement("div",{className:"hide-scroll",style:{height:300,width:275,marginLeft:24,overflowY:"auto"}},r.a.createElement("div",{className:"mt-4"},F&&F.map((function(t,a){return D()(t,"value","")?r.a.createElement("div",{className:"col-md-12 p-2 cursour-pointer",onClick:function(){e.setState({selectedStatusObject:t,status:D()(t,"urlkey","")},(function(){return e.filterData()}))}},r.a.createElement("span",{className:"ml-2 mr-2 donutchart-legend-dot",style:{backgroundColor:"".concat(D()(t,"line-color",J[a%8]))}}),r.a.createElement("span",null,D()(t,"name","-"),"\xa0(",Object(A.c)(t.value),")")):null}))))):r.a.createElement(h.a,null):r.a.createElement("div",{className:"w-100",style:{height:300}},r.a.createElement(g.a,null)))),r.a.createElement("div",null,r.a.createElement(M.a,{variant:"tabs",activeKey:a,onSelect:function(e){return n(e)}},r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#invoice"},"Invoice List")),r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#backlog"},"Order Backlog"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"titletranshist"},r.a.createElement("div",{className:"pull-left"},"Customer Backlog"),r.a.createElement("div",{className:"dropdown pull-right"},r.a.createElement("span",{className:"btn dropdown-toggle btn-primary cursour-pointer",role:"button",id:"","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return e.setshowExport(!0)}},"Export"),r.a.createElement(f.a,{onClickAway:this.setshowExport},r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right payexpdroplist ".concat(m&&"show"),"aria-labelledby":"dropdownMenuLink",id:""},r.a.createElement(S.CSVLink,{data:Z(O),ref:"csv",filename:"Order backlog, ".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".csv"),style:{display:"none"}}),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",marginBottom:"10px",cursor:"pointer"},onClick:function(){return e.exportAllData(!0)}},"Export CSV"),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",cursor:"pointer"},onClick:this.exportAllData},"Export Excel"))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 mt-2"},R?r.a.createElement("div",{style:{height:58,borderTopLeftRadius:10,borderTopRightRadius:10},className:"border-bottom pt-2 pb-2 pl-1"},r.a.createElement("span",{className:"pull-left mt-2",style:{width:54}},r.a.createElement("input",{className:"md-checkbox",style:{marginLeft:16,marginTop:1},type:"checkbox",defaultChecked:D()(l,"[0]","")&&!l.find((function(e){return!e.isselected})),onChange:function(t){return e.setState({rows:l.map((function(e){return Object(i.a)({},e,{isselected:t.target.checked})}))})}})),r.a.createElement("span",{className:"mt-2"},r.a.createElement("span",{onClick:function(){e.setState({dateModalType:"Invoice",showDateModal:!0})},className:"multiActivityshow btn btn-primary btn-sm cursour-pointer mr-2"},r.a.createElement("i",{className:"fa fa-calendar mr-1","aria-hidden":"true"}),"Invoice Date"),r.a.createElement("span",{onClick:function(){e.setState({dateModalType:"PayIQ",showDateModal:!0})},className:"multiActivityshow btn btn-primary btn-sm cursour-pointer mr-2"},r.a.createElement("i",{className:"fa fa-calendar mr-1","aria-hidden":"true"}),"PayIQ Date"),r.a.createElement("span",{onClick:function(){e.setState({dateModalType:"Due",showDateModal:!0})},className:"multiActivityshow btn btn-primary btn-sm cursour-pointer"},r.a.createElement("i",{className:"fa fa-calendar mr-1","aria-hidden":"true"}),"Due Date"))):null,r.a.createElement(k.a,Object.assign({},L,{rows:l,key:R,isrowselected:R,noDataText:d?"":"No data found",minRows:l.length>20?20:l.length,loading:d,resizable:!0,showPagination:!1,getTrProps:function(e,t,a){return{onClick:function(e){window.open("".concat(window.location.origin,"/backlog/").concat(D()(t.original,"id","-")),"_self")}}},defaultSorted:[{id:"due_date",desc:!1}],columns:N,data:l})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"filterthree"},r.a.createElement("div",{className:"pull-right"},r.a.createElement("button",{className:"btn btn-primary mr-2 width-94px",disabled:1===s,onClick:this.setPrevPage},"Previous"),r.a.createElement("button",{disabled:l.length<20,className:"btn btn-primary width-94px",onClick:this.setNextPage},"Next"))))))}}]),t}(r.a.Component),$=Object(l.b)((function(e){return{login:e.payables}}),{})(X),ee=a(568),te=a(779),ae=a(766),ne=a(608),ce=a(609),re=a(19),le=a(158),oe=a(231),se=a(224);var ie=function(e){var t=e.onHide,a=e.show,l=e.templateList,o=e.customerid,s=e.defaultData,i=e.getCustomerReminder,u=Object(c.useState)(""),m=Object(n.a)(u,2),d=m[0],f=m[1],p=Object(c.useState)(""),b=Object(n.a)(p,2),E=b[0],h=b[1],g=Object(c.useState)("-1"),v=Object(n.a)(g,2),y=v[0],N=v[1],_=Object(c.useState)(!0),O=Object(n.a)(_,2),j=O[0],D=O[1],Y=Object(c.useState)(""),w=Object(n.a)(Y,2),x=w[0],S=w[1],k=Object(c.useState)(""),C=Object(n.a)(k,2),A=C[0],P=C[1],R=Object(c.useState)("#normal"),I=Object(n.a)(R,2),F=I[0],L=I[1];return Object(c.useEffect)((function(){s&&(f(Math.abs(s.days)),h(s.template_id),N(s.days<0?"-1":"1"),D(s.is_enabled),S(s.ar_age_in_days),P(s.frequency_in_days))}),[s]),r.a.createElement(oe.a,{show:a,onHide:t,className:"mt-4"},r.a.createElement(oe.a.Header,{closeButton:!0},r.a.createElement("strong",null,s?"Update":"Add"," ",s&&s.is_recurring||!s&&"#recurring"===F?"Recurring Reminder":"Auto Reminder")),!s&&r.a.createElement(M.a,{variant:"tabs",activeKey:F,onSelect:function(e){return L(e)}},r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#normal"},"Auto Reminder")),r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#recurring"},"Recurring Reminder"))),r.a.createElement(oe.a.Body,null,r.a.createElement("form",{action:"",method:"post"},r.a.createElement("div",{className:"form-group"},r.a.createElement("span",null,r.a.createElement("label",null,"Email Template: ")),r.a.createElement("select",{defaultValue:s&&s.template_id,className:"form-control",onChange:function(e){return h(e.target.value)}},r.a.createElement("option",{disabled:!0,selected:!0},"Select Template"),l&&l.length?l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})):null)),(s&&!s.is_recurring||!s&&"#normal"===F)&&r.a.createElement("div",{className:"form-group"},r.a.createElement("span",null,r.a.createElement("label",null,"Reminder : ")),r.a.createElement("select",{defaultValue:s&&s.days<0?"-1":"1",className:"form-control",onChange:function(e){return N(e.target.value)}},r.a.createElement("option",{value:"-1"},"Before"),r.a.createElement("option",{value:"1"},"After"))),(s&&!s.is_recurring||!s&&"#normal"===F)&&r.a.createElement("div",{className:"form-group"},r.a.createElement("span",null,r.a.createElement("label",null,"Days : ")),r.a.createElement("input",{defaultValue:s&&Math.abs(s.days),type:"number",onInput:function(e){return f(e.target.value)},className:"form-control",placeholder:"Enter ..."})),(s&&s.is_recurring||!s&&"#recurring"===F)&&r.a.createElement("div",{className:"form-group"},r.a.createElement("span",null,r.a.createElement("label",null,"Days : ")),r.a.createElement("input",{defaultValue:s&&Math.abs(s.ar_age_in_days),type:"number",onInput:function(e){return S(e.target.value)},className:"form-control",placeholder:"Enter ..."})),(s&&s.is_recurring||!s&&"#recurring"===F)&&r.a.createElement("div",{className:"form-group"},r.a.createElement("span",null,r.a.createElement("label",null,"Frequency : ")),r.a.createElement("input",{defaultValue:s&&Math.abs(s.frequency_in_days),type:"number",onInput:function(e){return P(e.target.value)},className:"form-control",placeholder:"Enter ..."})),r.a.createElement("div",{className:"checkbox switcher",key:j},r.a.createElement("label",{htmlFor:"reminder"},r.a.createElement("span",{className:"mr-2"},r.a.createElement("label",null,"Status : ")),r.a.createElement("input",{type:"checkbox",id:"reminder",defaultChecked:j,onChange:function(e){return D(e.target.checked)}}),r.a.createElement("span",null,r.a.createElement("small",null)))),r.a.createElement("div",{className:"form-group text-right mt-4"},r.a.createElement(se.a,{onClick:function(){var e=s?"receivable-reminder?id=".concat(s.id):"receivable-reminder",a=s?"patch":"post",n={customer_id:o,days:s&&s.is_recurring||!s&&"#recurring"===F?0:"-1"===y?-1*Number(d):Number(d),template_id:E,is_recurring:!!(s&&s.is_recurring||!s&&"#recurring"===F),is_enabled:j,ar_age_in_days:s&&s.is_recurring||!s&&"#recurring"===F?x:0,frequency_in_days:s&&s.is_recurring||!s&&"#recurring"===F?A:0};T.a[a](e,n).then((function(e){t(),i()}))},disabled:(s&&!s.is_recurring||!s&&"#normal"===F?!d:!x&&!A)||!E||!y,variant:"primary",className:"btn subbtn btn-primary"},"Submit")))))},ue=a(86),me=[{name:"Critical",value:1},{name:"High",value:2},{name:"Medium",value:3},{name:"Low",value:4}],de=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(B.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(c)))).state={showContactModal:!1,preExpanded:"",showReminderModal:!1,emailTemplateData:[],defaultEmailData:null,allentities:[]},a.getallentities=function(){T.a.get("/payroll/setting").then((function(e){a.setState({allentities:D()(e,"data.result",[])})})).catch((function(e){return Object(O.a)(e)}))},a.handleContactModal=function(e){return a.setState({showContactModal:e})},a.getEmailTemplates=function(){T.a.get("receivable-reminder-email-template").then((function(e){a.setState({emailTemplateData:D()(e,"data.result",[])})}))},a.updateCustomer=function(e){var t=a.props.customerid;T.a.put("customer?id=".concat(t),e).then((function(e){})).catch((function(e){return Object(O.a)(e)}))},a.expandAndOpen=function(e){a.setState({preExpanded:e},a.props.handleToggleCollapse(!1))},a.getName=function(e){var t=a.state.emailTemplateData;return t.length?t.find((function(t){return t.id===e})).name:"-"},a}return Object(z.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.getEmailTemplates(),this.getallentities()}},{key:"componentDidUpdate",value:function(){var e=document.querySelectorAll("input[type=number]");if(e.length)for(var t=["-","+","e"],a=0;a<e.length;a++)e[a].addEventListener("input",(function(){this.value=this.value.replace(/[e\+\-]/gi,"")})),e[a].addEventListener("keydown",(function(e){t.includes(e.key)&&e.preventDefault()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.collapse,n=t.customerid,c=t.onEmailSave,l=t.customerData,o=t.setshowNoteModal,s=t.customerReminder,i=t.getCustomerReminder,u=t.handleToggleCollapse,m=t.setisinvoicelevelnote,d=t.notesUpdated,f=t.setnotesUpdated,b=t.customerCategoryList,E=this.state,h=E.preExpanded,g=E.showContactModal,y=E.showReminderModal,N=E.emailTemplateData,_=E.defaultEmailData,j=E.allentities,Y=D()(l,"result[0].name","-"),w=(D()(l,"detail.category","-"),D()(l,"detail.payment_terms","-")),M=D()(l,"result[0].region","-");if(!l)return r.a.createElement("div",null);var S=j&&D()(j.find((function(e){return e.id===D()(l,"detail.corp_entity_id","")})),"name","");return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",{className:"col-md-1 collapsable-panel"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"leftbaricon",onClick:function(){e.setState({preExpanded:""}),u(!a)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Expand")},r.a.createElement("i",{className:"fa fa-chevron-left"}))),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.expandAndOpen(0)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Company")},r.a.createElement("i",{className:"onlyicon fa fa-info-circle cursor-pointer","aria-hidden":"true"}))),r.a.createElement("div",{onClick:function(){return e.expandAndOpen(1)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Reminders")},r.a.createElement("i",{className:"onlyicon fa fa-bell cursor-pointer","aria-hidden":"true"}))),"DEV"===re.a.MODE&&r.a.createElement("div",{onClick:function(){return e.expandAndOpen(2)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Payment Method")},r.a.createElement("i",{className:"onlyicon fa fa-usd cursor-pointer","aria-hidden":"true"}))),"DEV"===re.a.MODE&&r.a.createElement("div",{onClick:function(){return e.expandAndOpen(3)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Contact Person")},r.a.createElement("i",{className:"onlyicon fa fa-user cursor-pointer","aria-hidden":"true"}))),r.a.createElement("div",{onClick:function(){return e.expandAndOpen(4)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Notes")},r.a.createElement("i",{className:"onlyicon fa fa-pencil cursor-pointer","aria-hidden":"true"})))))):r.a.createElement("div",{className:"right-col"},r.a.createElement(te.a,{placement:"top",overlay:r.a.createElement(ae.a,null,"Send email")},r.a.createElement("i",{className:"fa fa-envelope px-2 cursor-pointer text-3F6289 cfa-rounded-circle",style:{fontSize:22},onClick:function(){Object(p.c)({show:!0,to:D()(l,"detail.email",""),onSave:c})}})),r.a.createElement(te.a,{placement:"top",overlay:r.a.createElement(ae.a,null,"Add notes")},r.a.createElement("i",{className:"fa fa-sticky-note px-2 cursor-pointer text-3F6289 cfa-rounded-circle",style:{fontSize:22},onClick:function(){o(!0),m(!1)}})),r.a.createElement("div",{className:"card bg-transparent"},r.a.createElement("div",{className:"leftbaricon",onClick:function(){e.setState({preExpanded:""}),u(!a)}},r.a.createElement(te.a,{placement:"left",overlay:r.a.createElement(ae.a,null,"Collapse")},r.a.createElement("i",{className:"fa fa-chevron-right"}))),r.a.createElement(ee.a,{allowMultipleExpanded:!0,allowZeroExpanded:!0,className:"details-accordion preExpand-".concat(h)},r.a.createElement(ee.b,{className:"accordion_card_1"},r.a.createElement(ee.d,{onClick:function(){return e.setState({preExpanded:""})}},r.a.createElement(ee.c,{className:"bg-white px-3 py-3 mb-2 cursor-pointer accordion__button"},r.a.createElement("strong",null,"Company")," ",r.a.createElement("i",{className:"more-less fa fa-chevron-down pull-right"})," ",r.a.createElement("i",{className:"more-less fa fa-chevron-up pull-right"}))),r.a.createElement(ee.e,{className:"pt-2 mb-2 card"},r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Name:")),r.a.createElement("div",null,Y)),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Customer Category:")),r.a.createElement("div",null,r.a.createElement(le.a,{value:D()(l,"detail.customer_category_id","-"),options:b.map((function(e){return{name:e.name,value:e.id}})),updateValue:function(e){T.a.put("".concat("customer","?id=").concat(n),{category:e},{auth:{username:x.a.get(),password:Math.random().toString(20)}}).then((function(){Object(v.a)("Updated successfully","success")})).catch((function(e){return Object(O.a)(e)}))}}))),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Classification:")),r.a.createElement("div",null,r.a.createElement(le.a,{value:D()(l,"detail.classification","-"),options:me,updateValue:function(e){T.a.put("".concat("customer","?id=").concat(n),{classification:e}).then((function(){Object(v.a)("Updated successfully","success")})).catch((function(e){return Object(O.a)(e)}))}}))),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Region:")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",defaultValue:M,onBlur:function(t){return e.updateCustomer({region:t.target.value})},className:"ccat"}),r.a.createElement("span",{className:"penedit"},r.a.createElement("i",{class:"fa fa-pencil","aria-hidden":"true"})))),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Payment terms:")),r.a.createElement("div",null,w)),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Account no:")),r.a.createElement("div",null,"-")),r.a.createElement("div",{class:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Email:")),r.a.createElement("div",null,r.a.createElement(ue.a,{value:D()(l,"detail.email","-"),updateValue:function(t){T.a.put("".concat("customer","?id=").concat(n),{email:t}).then((function(){Object(v.a)("Updated successfully","success"),e.props.GetCustomerDetail()})).catch((function(e){return Object(O.a)(e)}))}}))),r.a.createElement("div",{className:"col-md-12 mb-2"},r.a.createElement("label",null,r.a.createElement("strong",null,"Entity:")),r.a.createElement("div",null,S)))),r.a.createElement(ee.b,{className:"accordion_card_2"},r.a.createElement(ee.d,{onClick:function(){return e.setState({preExpanded:""})}},r.a.createElement(ee.c,{className:"bg-white px-3 py-3 mb-2 cursor-pointer accordion__button"},r.a.createElement("strong",null,"Auto Reminders")," ",r.a.createElement("i",{className:"more-less fa fa-chevron-down pull-right"})," ",r.a.createElement("i",{className:"more-less fa fa-chevron-up pull-right"}))),r.a.createElement(ee.e,{className:"pt-2 mb-2 card"},r.a.createElement("div",{className:"col-md-12",style:{marginBottom:"10px",marginTop:"10px"}},s.length?s.map((function(t){return r.a.createElement("div",{className:"pencilhvr cursor-pointer",onClick:function(){return e.setState({defaultEmailData:t,showReminderModal:!0})},style:{marginBottom:"10px",borderBottom:"1px solid #ddd",paddingBottom:"5px",position:"relative"}},t.is_recurring?r.a.createElement("div",null,"Recurring : Every ",t.ar_age_in_days," Days"):r.a.createElement("div",null,"Reminder : ",t.days<0?"Before":"After"," ",Math.abs(t.days)," Days"),r.a.createElement("div",null,"Template : ",e.getName(t.template_id)))})):null,r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-sm btn-primary pull-right",onClick:function(){return e.setState({showReminderModal:!0})}},"Add New"))))),"DEV"===re.a.MODE&&r.a.createElement(ee.b,{className:"accordion_card_3"},r.a.createElement(ee.d,{onClick:function(){return e.setState({preExpanded:""})}},r.a.createElement(ee.c,{className:"bg-white px-3 py-3 mb-2 cursor-pointer accordion__button"},r.a.createElement("strong",null,"Payment Method")," ",r.a.createElement("i",{className:"more-less fa fa-chevron-down pull-right"})," ",r.a.createElement("i",{className:"more-less fa fa-chevron-up pull-right"}))),r.a.createElement(ee.e,{className:"pt-2 mb-2 card"},r.a.createElement("div",{className:"px-2 py-2"},r.a.createElement("select",{className:"form-control"},r.a.createElement("option",null,"A"),r.a.createElement("option",null,"B"))))),"DEV"===re.a.MODE&&r.a.createElement(ee.b,{className:"accordion_card_4"},r.a.createElement(ee.d,{onClick:function(){return e.setState({preExpanded:""})}},r.a.createElement(ee.c,{className:"bg-white px-3 py-3 mb-2 cursor-pointer accordion__button"},r.a.createElement("strong",null,"Contact Person")," ",r.a.createElement("i",{className:"more-less fa fa-chevron-down pull-right"})," ",r.a.createElement("i",{className:"more-less fa fa-chevron-up pull-right"}))),r.a.createElement(ee.e,{className:"pt-2 mb-2 card"},r.a.createElement("div",{className:"notes px-2"},r.a.createElement("div",null,r.a.createElement("strong",null,"Name:")," Prashant"," "),r.a.createElement("div",null,r.a.createElement("strong",null,"Email:")," prashant@gmail.com"),r.a.createElement("div",null,r.a.createElement("strong",null,"Mobile:")," +91 9876543210")),r.a.createElement("div",{className:"px-2"},r.a.createElement("button",{className:"btn btn-sm btn-primary pull-right mb-2",onClick:function(){return e.handleContactModal(!0)}},"Add New")))),r.a.createElement(ee.b,{className:"accordion_card_5"},r.a.createElement(ee.d,{onClick:function(){return e.setState({preExpanded:""})}},r.a.createElement(ee.c,{className:"bg-white px-3 py-3 cursor-pointer accordion__button"},r.a.createElement("strong",null,"Notes")," ",r.a.createElement("i",{className:"more-less fa fa-chevron-down pull-right"})," ",r.a.createElement("i",{className:"more-less fa fa-chevron-up pull-right"}))),r.a.createElement(ee.e,{className:"pt-2 px-3 bg-white card"},r.a.createElement(ce.a,{type:"customers",key:h,id:n,notesUpdated:d,setnotesUpdated:f,onUpdate:function(){}}))))),r.a.createElement(ne.a,{show:g,onHide:this.handleContactModal})),r.a.createElement(ie,{show:y,customerid:n,templateList:N,onHide:function(){return e.setState({showReminderModal:!1,defaultEmailData:null})},defaultData:_,getCustomerReminder:i}))}}]),t}(r.a.Component),fe=function(e){var t=e.cx,a=e.cy,n=e.innerRadius,c=e.outerRadius,l=e.startAngle,o=e.endAngle,s=e.fill;return r.a.createElement("g",null,r.a.createElement(C.o,{className:"cursour-pointer",cx:t,cy:a,innerRadius:n,outerRadius:c+5,startAngle:l,endAngle:o,fill:s}))},pe=function(e){var t=e.data,a=void 0===t?[]:t,l=(e.vendorData,e.onRecordClick),o=e.total,s=void 0===o?0:o,i=e.selectedSection,u=Object(c.useState)(null),m=Object(n.a)(u,2),d=m[0],f=m[1];return Object(c.useEffect)((function(){(D()(i,"dataindex",null)||0===D()(i,"dataindex",null))&&f(D()(i,"dataindex",null))}),[i]),r.a.createElement(C.m,{width:320,height:320},r.a.createElement(C.l,{animationDuration:1e3,activeIndex:d,activeShape:fe,data:a,innerRadius:60,outerRadius:140,fill:"#8884d8",dataKey:"value",onClick:function(e){l(e.payload.payload)},onMouseEnter:function(e,t){f(t)},onMouseLeave:function(e,t){f(D()(i,"dataindex",null))}},r.a.createElement(C.g,{className:"cursour-pointer",width:30,position:"center",onClick:function(){return l(null)}},"Total ".concat(Object(A.f)(s)||"-")),a.map((function(e,t){return r.a.createElement(C.e,{className:"cursour-pointer",fill:be[t%be.length]})}))))},be=["#2B7EF6","#7CA82D","#EF853A","#DB504D","#424348","#90ED7D","#3C861F","#F9D7E0"];var Ee=Object(l.b)((function(e){return{}}),{})((function(e){e.paymentId;var t=e.history,a=(e.selectedpayment,e.match),l=e.location,o=Object(c.useState)(!1),s=Object(n.a)(o,2),m=s[0],j=s[1],Y=Object(c.useState)(!1),C=Object(n.a)(Y,2),I=C[0],F=C[1],L=Object(c.useState)(!1),B=Object(n.a)(L,2),K=B[0],H=B[1],z=Object(c.useState)([]),U=Object(n.a)(z,2),V=U[0],W=U[1],Q=Object(c.useState)(!0),q=Object(n.a)(Q,2),J=q[0],G=q[1],Z=Object(c.useState)(null),X=Object(n.a)(Z,2),ee=(X[0],X[1]),te=Object(c.useState)(null),ae=Object(n.a)(te,2),ne=ae[0],ce=ae[1],re=Object(c.useState)(!1),le=Object(n.a)(re,2),oe=le[0],se=le[1],ie=Object(c.useState)(null),ue=Object(n.a)(ie,2),me=ue[0],fe=ue[1],Ee=Object(c.useState)(!1),he=Object(n.a)(Ee,2),ge=he[0],ve=he[1],ye=Object(c.useState)(1),Ne=Object(n.a)(ye,2),_e=Ne[0],Oe=Ne[1],je=Object(c.useState)(20),De=Object(n.a)(je,2),Ye=De[0],we=(De[1],Object(c.useState)(!1)),xe=Object(n.a)(we,2),Me=xe[0],Se=xe[1],ke=Object(c.useState)(D()(a,"params.id","")),Ce=Object(n.a)(ke,2),Ae=Ce[0],Pe=(Ce[1],Object(c.useState)(null)),Re=Object(n.a)(Pe,2),Te=Re[0],Ie=Re[1],Fe=Object(c.useState)([]),Le=Object(n.a)(Fe,2),Be=Le[0],Ke=Le[1],He=Object(c.useState)(!0),ze=Object(n.a)(He,2),Ue=ze[0],Ve=ze[1],We=Object(c.useState)([]),Qe=Object(n.a)(We,2),qe=Qe[0],Je=Qe[1],Ge=Object(c.useState)([]),Ze=Object(n.a)(Ge,2),Xe=Ze[0],$e=Ze[1],et=Object(c.useState)(localStorage.getItem("customer_details_activeTab")||("#backlog"===l.hash?"#backlog":"#invoice")),tt=Object(n.a)(et,2),at=tt[0],nt=tt[1],ct=Object(c.useState)("total_amount_due"),rt=Object(n.a)(ct,2),lt=rt[0],ot=rt[1],st=Object(c.useState)("desc"),it=Object(n.a)(st,2),ut=it[0],mt=it[1],dt=Object(c.useRef)(null),ft=w()().format("MM/DD/YYYY"),pt=w()().add("day",1).format("MM/DD/YYYY"),bt=w()().add("year",1).format("MM/DD/YYYY"),Et=w()().subtract("year",1).format("MM/DD/YYYY"),ht=Object(c.useState)(),gt=Object(n.a)(ht,2),vt=gt[0],yt=gt[1],Nt=[{name:"Paid",value:Math.abs(ne||0),dataindex:0,urlparams:"&status=closed&from_date=".concat(Et,"&to_date=").concat(ft)},{name:"Balance",value:Math.abs(D()(me,"Outstanding Balance",0)),dataindex:1,urlparams:"&status=open&from_date=".concat(pt,"&to_date=").concat(bt)},{name:"Overdue",value:Math.abs(D()(me,"Overdue Balance",0)),dataindex:2,urlparams:"&status=open&from_date=".concat(Et,"&to_date=").concat(ft)}];function _t(){Ae&&T.a.get("receivable-reminder?customer_id=".concat(Ae)).then((function(e){Ke(D()(e,"data.result",[]).filter((function(e){return e.customer_id==Ae})))})).catch((function(e){return Object(O.a)(e)}))}Object(c.useEffect)((function(){window.scrollTo(0,0),yt(Nt[2]),_t(),Dt(),jt()}),[]),Object(c.useEffect)((function(){at&&at!==localStorage.setItem("customer_details_activeTab",at)&&localStorage.setItem("customer_details_activeTab",at)}),[at]);var Ot=function(e){vt&&(ot(e),mt(e===lt&&"desc"===ut?"asc":"desc"),Oe(1),W([]),G(!0))};function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D()(a,"params.id","");Promise.all([T.a.get("customer/report?id=".concat(e)),T.a.get("arinvoice/total?from_date=".concat(Et,"&to_date=").concat(ft,"&customer_id=").concat(a.params.id,"&status=all")),T.a.get("arinvoice/total?from_date=".concat(Et,"&to_date=").concat(ft,"&customer_id=").concat(a.params.id,"&status=closed")),T.a.get("customer?id=".concat(Ae))]).then((function(e){fe(D()(e,"[0].data","")),ee(D()(e,"[1].data.total",0)),ce(D()(e,"[2].data.total",0)),Ie(D()(e,"[3].data","")),se(!0)})).catch((function(e){return Object(O.a)(e)}))}Object(c.useEffect)((function(){if(me&&Ae){var e=[];if(G(!0),1!==_e||vt){var t="arinvoice?customer_id=".concat(Ae,"&page=").concat(_e,"&per_page=").concat(Ye);t=vt?"".concat(t).concat(D()(vt,"urlparams",""),"&sort_by=").concat(lt,"&sort_order=").concat(ut):"".concat(t,"&status=closed"),T.a.get(t).then((function(t){e=[].concat(Object(u.a)(e),Object(u.a)(D()(t,"data.result",[]))).slice(0,20),D()(e,"[0]","")||"Paid"===vt.name?(W(e),G(!1)):("Overdue"===vt.name&&yt(Nt[1]),"Balance"===vt.name&&yt(null))})).catch((function(e){return Object(O.a)(e)}))}else{var a="arinvoice?customer_id=".concat(Ae,"&status=open&per_page=100");T.a.get(a).then((function(t){e=Object(u.a)(D()(t,"data.result",[])),a="arinvoice?customer_id=".concat(Ae,"&status=closed&page=").concat(_e,"&per_page=").concat(Ye),T.a.get(a).then((function(t){e=[].concat(Object(u.a)(e),Object(u.a)(D()(t,"data.result",[]))).slice(0,20),W(e),G(!1)})).catch((function(e){return Object(O.a)(e)}))})).catch((function(e){return Object(O.a)(e)}))}}}),[lt,ut,_e,Ye,Ae,me,vt]);var Dt=function(){T.a.get("customercategory?per_page=1000").then((function(e){$e(e.data.result)})).catch((function(e){return Object(O.a)(e)}))};function Yt(e){return e.length?e.map((function(e){return{Invoice:D()(e,"invoice_number",""),"PayIQ Date":D()(e,"expected_date","")?w()(D()(e,"expected_date","")).format("YYYY/MM/DD"):"-","Due Date":D()(e,"due_date","")?w()(D()(e,"due_date","")).format("YYYY/MM/DD"):"-","Amount Due":Object(A.b)(D()(e,"total_amount_due",0)),"Payment Method":D()(e,"","-"),Status:D()(e,"status","")}})):[{Invoice:"","PayIQ Date":"","Due Date":"","Amount Due":"","Payment Method":"",Status:""}]}function wt(e){var t=V.filter((function(e){return e.isselected})).map((function(t){return T.a.put("/arinvoice?id=".concat(t.id),{expected_date:w()().add(1,e).format("MM/DD/YYYY")})}));Promise.all(t).then((function(){H(!1),Object(v.a)("Updated successfully","success");var e=me;fe(null),fe(e),W(V.map((function(e){return Object(i.a)({},e,{isselected:!1})}))),localStorage.setItem("refresh_reports",!0)}))}var xt=function(e){var t="arinvoice?customer_id=".concat(Ae,"&per_page=1000");T.a.get(t).then((function(t){Je(t.data.result),!0===e?dt.current.link.click():function(e){var t="customerdetail".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),a={Sheets:{data:R.utils.json_to_sheet(e)},SheetNames:["data"]},n=R.write(a,{bookType:"xlsx",type:"array"}),c=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});N.saveAs(c,t)}(Yt(t.data.result))})).catch((function(e){return Object(O.a)(e)}))};function Mt(){Object(y.c)({variant:"warning",msg:"Are you sure you want to delete this record?",onSave:function(){Object(y.b)();var e=V.filter((function(e){return e.isselected}));T.c.delete("arinvoice",{data:{ids:e.map((function(e){return e.id}))}}).then((function(){var e=me;fe(null),fe(e),W(V.map((function(e){return Object(i.a)({},e,{isselected:!1})}))),localStorage.setItem("refresh_reports",!0)})).catch((function(){Object(v.a)("invoices cannot be deleted","error")}))}})}var St=V&&V.find((function(e){return e.isselected})),kt=[{Header:r.a.createElement("input",{className:"md-checkbox",type:"checkbox",onChange:function(){var e=!(V&&!V.find((function(e){return!e.isselected})));W(V.map((function(t){return Object(i.a)({},t,{isselected:e})})))},checked:D()(V,"[0]","")&&!V.find((function(e){return!e.isselected}))}),accessor:"isselected",Cell:function(e){return r.a.createElement("div",{onClick:function(t){t.stopPropagation();var a=!e.value,n=Object(u.a)(V);n[e.index].isselected=a,W(n)}},r.a.createElement("input",{className:"md-checkbox",style:{marginLeft:15},type:"checkbox",defaultChecked:e.value,checked:e.value}))},sortable:!1,filterable:!1,width:70},{Header:function(){return r.a.createElement("span",{className:"cursour-pointer",onClick:function(){Ot("invoice_number")}},"Invoice",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"invoice_number",width:180,Cell:function(e){return r.a.createElement("div",{data:{id:D()(e,"original.id",""),type:"invoice"}},r.a.createElement("span",null,D()(e,"original.invoice_number","")))}},{Header:function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("span",null,"PayIQ date ",r.a.createElement("img",{src:d.a,alt:" "})))},accessor:"expected_date",width:180,className:"text-center",Cell:function(e){return r.a.createElement("div",null,Object(P.b)(D()(e,"value",""))||"-",D()(e,"original.expected_date_overridden","")?r.a.createElement("i",{className:"fa fa-check text-success m-1"}):"")}},{Header:function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"cursour-pointer",onClick:function(){Ot("Paid"===D()(vt,"name","")?"date_closed":"due_date")}},("Paid"===D()(vt,"name","")?"Closed date":"Overdue"===D()(vt,"name","")&&"Due date")||"Due/Closed date"," ",r.a.createElement("img",{src:d.a,alt:" "})))},accessor:"due_date",width:180,className:"text-center",Cell:function(e){return D()(e,"original.date_closed","")?Object(P.b)(D()(e,"original.date_closed","")):Object(P.b)(D()(e,"original.due_date",""))}},{Header:function(){return r.a.createElement("div",{className:"cursour-pointer text-center",onClick:function(){var e="Paid"===D()(vt,"name","")?"total_amount_due":"invoice_amount";Ot(e)}},D()(vt,"name","")?"Paid"===D()(vt,"name","")?"Invoice Amount":"Amount Due":"Amount",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"total_amount_due",className:"text-center pr-2",width:150,Cell:function(e){return Object(A.c)(Math.round(D()(e,"original.date_closed","")?D()(e,"original.invoice_amount",0):D()(e,"original.total_amount_due",0)))||"-"}},{Header:function(){return!St&&r.a.createElement("span",null,"Payment method ",r.a.createElement("img",{src:d.a,alt:" "}))},accessor:"test",width:180,className:"text-center",Cell:function(e){return D()(e,"test","-")}},{Header:function(){return r.a.createElement("div",{className:"cursour-pointer text-center"},"Status",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},width:100,accessor:"status",Cell:function(e){return r.a.createElement("div",{className:"text-center"},D()(e,"original.status","Schedule payment"))}}],Ct=function(){var e=V.filter((function(e){return e.isselected})),t=0,a="";return e.forEach((function(e){a="".concat(a," <li> Invoice number: ").concat(e.invoice_number,", Due date: ").concat(Object(P.b)(e.due_date),", Amount due: ").concat(Object(A.f)(e.total_amount_due)," </li>"),t+=e.total_amount_due})),"Invoices, <ul> ".concat(a," </ul> <p> Total: ").concat(Object(A.f)(t)," </p>")},At=St?{TheadComponent:function(){return r.a.createElement("div",{style:{height:58,borderTopLeftRadius:10,borderTopRightRadius:10},className:"border-bottom pt-2 pb-2 pl-1"},r.a.createElement("span",{className:"pull-left mt-2",style:{width:54}},r.a.createElement("div",{onClick:function(e){var t=!(V&&!V.find((function(e){return!e.isselected})));W(V.map((function(e){return Object(i.a)({},e,{isselected:t})})))}},r.a.createElement("input",{className:"md-checkbox",style:{marginLeft:16,marginTop:1},type:"checkbox",checked:D()(V,"[0]","")&&!V.find((function(e){return!e.isselected}))}))),r.a.createElement("span",{className:"mt-2"},r.a.createElement("span",{onClick:function(){return H(!0)},className:"multiActivityshow btn btn-primary btn-sm cursour-pointer","data-toggle":"modal","data-target":"#myModal"},r.a.createElement("i",{className:"fa fa-calendar mr-1","aria-hidden":"true"}),"PayIQ Date"),r.a.createElement("span",{onClick:function(){j(!0),F(!0)},className:"multiActivityshow btn btn-primary btn-sm ml-2 cursour-pointer","data-toggle":"modal","data-target":"#myModal2"},r.a.createElement("i",{className:"fa fa-pencil mr-1","aria-hidden":"true"})," Notes"," "),r.a.createElement("span",{onClick:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(p.c)(Object(i.a)({fetchingInvoices:!1},e))}Object(p.c)({show:!0,to:D()(Te,"detail.email",""),body:Ct(),onSave:Pt,fetchingInvoices:!0}),T.a.post("invoice-attachments",{invoices:V.filter((function(e){return e.isselected})).map((function(e){return e.invoice_number}))}).then((function(t){e({files:D()(t,"data.result",[]).map((function(e){return Object(i.a)({},e,{isbase64:!0})}))})})).catch((function(t){Object(v.a)("Invoice not available","error"),e()}))},className:"multiActivityshow btn btn-primary btn-sm ml-2 cursour-pointer","data-toggle":"modal","data-target":"#myModal5"},r.a.createElement("i",{className:"fa fa-envelope mr-1","aria-hidden":"true"})," Email"," "),r.a.createElement("span",{onClick:function(){return wt("week")},className:"btn btn-sm btn-primary ml-2"},r.a.createElement("i",{className:"fas fa-play mr-1"})," Week"," "),r.a.createElement("span",{onClick:function(){return wt("month")},className:"btn btn-sm btn-primary ml-2"},r.a.createElement("i",{className:"fas fa-forward mr-1"})," Month"," "),x.a.getIsPayAdmin()&&r.a.createElement("span",{className:"multiActivityshow btn btn-primary btn-sm ml-2 cursour-pointer ".concat(!x.a.getIsPayAdmin&&"disabled"),onClick:Mt},r.a.createElement("i",{class:"fa fa-trash-o","aria-hidden":"true",style:{fontSize:"15px"}})," Delete invoice"," "),r.a.createElement("span",{className:"total-amount-wrapper right-0"},r.a.createElement("strong",null,"Total: "),r.a.createElement("span",null,Object(A.a)(Math.round(V.filter((function(e){return e.isselected})).reduce((function(e,t){return+e+ +(t.total_amount_due||t.invoice_amount)}),0)))))))}}:{};function Pt(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4?arguments[4]:void 0,r={to:e,subject:t,message:a,cc:c},l=new FormData;l.set("metadata",JSON.stringify(r)),n.forEach((function(e){e.isbase64?l.append("files[]",new File([Object(_.a)(decodeURIComponent(JSON.parse(e.content)))],e.name),e.name):l.append("files[]",e,e.name)})),T.b.post("sendemail?customer_id=".concat(Ae),l).then((function(){Object(p.b)(),Object(v.a)("An email was sent to ".concat(e),"success"),T.a.put("/customer/note",{date:w()().format("MM/DD/YYYY"),note:"An email was sent to ".concat(e," \n Subject: ").concat(t),customer_id:Ae}).then((function(){Object(p.b)(),Se(!0),W(V.map((function(e){return Object(i.a)({},e,{isselected:!1})})))}))})).catch((function(e){return Object(O.a)(e)}))}var Rt=(ne||0)+D()(me,"Outstanding Balance",0)+D()(me,"Overdue Balance",0);return r.a.createElement("div",{className:"row px-15",id:"dashboardBody"},r.a.createElement(E.a,{header:"Add Note",show:m,handleClose:function(){return j(!1)},handleSubmit:function(e){if(I){var t=V.filter((function(e){return e.isselected})).map((function(t){return T.a.put("/customer/note",{date:w()().format("MM/DD/YYYY"),note:e,invoice_id:JSON.stringify(t.id),customer_id:Ae})}));Promise.all(t).then((function(){j(!1),Object(v.a)("Notes added","success"),Se(!0),W(V.map((function(e){return Object(i.a)({},e,{isselected:!1})})))}))}else T.a.put("/customer/note",{date:w()().format("MM/DD/YYYY"),note:e,customer_id:Ae}).then((function(){j(!1),Object(v.a)("Notes added","success"),Se(!0),W(V.map((function(e){return Object(i.a)({},e,{isselected:!1})})))}))}}),r.a.createElement(b.a,{header:"Update PayIQ Date",show:K,handleClose:function(){return H(!1)},handleSubmit:function(e){var t=V.filter((function(e){return e.isselected})).map((function(t){return T.a.put("/arinvoice?id=".concat(t.id),{expected_date:w()(e).format("MM/DD/YYYY"),expected_date_override:!0})}));Promise.all(t).then((function(){H(!1),Object(v.a)("Updated successfully","success");var e=me;fe(null),fe(e),localStorage.setItem("refresh_reports",!0)}))}}),r.a.createElement("div",{className:Ue?"slide-left":"slide-right"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"paynewdetsec"},r.a.createElement("div",{className:"titletranshist",style:{fontSize:"18px",paddingBottom:"15px",float:"left"}},r.a.createElement("span",{onClick:function(){"#reports"===e.location.hash?e.history.push("/reports"):t.goBack()},title:"Back"},r.a.createElement("i",{className:"fa fa-arrow-left",style:{color:"#ddd",marginRight:"5px",ariaHidden:!0,cursor:"pointer"}})),"\xa0",D()(me,"Vendor Name",""))))),r.a.createElement("div",{className:"#invoice"!==at?"d-none":""},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pl-5"},oe?Rt?r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{onRecordClick:function(e){Oe(1),yt(e)},data:Nt,total:Rt,selectedSection:vt}),r.a.createElement("div",{className:"hide-scroll",style:{height:300,width:275,marginLeft:24,overflowY:"auto"}},r.a.createElement("div",{className:"mt-4"},Nt&&Nt.map((function(e,t){return D()(e,"value","")?r.a.createElement("div",{className:"col-md-12 p-2 cursour-pointer",onClick:function(){Oe(1),yt(e)}},r.a.createElement("span",{className:"ml-2 mr-2 donutchart-legend-dot",style:{backgroundColor:"".concat(D()(e,"line-color",be[t%8]))}}),r.a.createElement("span",null,D()(e,"name","-"),"\xa0(",Object(A.c)(e.value),")")):""}))))):r.a.createElement(h.a,null):r.a.createElement("div",{className:"w-100",style:{height:300}},r.a.createElement(g.a,null)))),r.a.createElement(M.a,{variant:"tabs",activeKey:at,onSelect:function(e){return nt(e)}},r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#invoice"},"Invoice List")),r.a.createElement(M.a.Item,null,r.a.createElement(M.a.Link,{eventKey:"#backlog"},"Order Backlog"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"titletranshist"},r.a.createElement("div",{className:"pull-left"},"Customer Invoices"),r.a.createElement("div",{className:"dropdown pull-right"},r.a.createElement("span",{className:"btn dropdown-toggle btn-primary",role:"button",id:"","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return ve(!0)}},"Export"),r.a.createElement(f.a,{onClickAway:ve},r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right payexpdroplist ".concat(ge&&"show"),"aria-labelledby":"dropdownMenuLink",id:""},r.a.createElement(S.CSVLink,{data:Yt(qe),ref:dt,filename:"customerdetails_".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".csv"),style:{display:"none"}}),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",marginBottom:"10px",cursor:"pointer"},onClick:function(){return xt(!0)}},"Export CSV"),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",cursor:"pointer"},onClick:xt},"Export Excel"))))),r.a.createElement("div",{className:"paytable mt-3 table-responsive",style:{overflowY:"hide"}},r.a.createElement("div",{className:"mt-2"},r.a.createElement(k.a,Object.assign({},At,{minRows:V.length||1,resizable:!0,showPagination:!1,noDataText:J?"":"No data found",loading:J,getTrProps:function(e,t,a){return{onClick:function(e){window.open("".concat(window.location.origin,"/receivables/").concat(D()(t.original,"id","-")),"_self")}}},columns:kt,data:V})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"filterthree"},r.a.createElement("div",{className:"pull-right"},r.a.createElement("button",{className:"btn btn-primary mr-2 width-94px",disabled:1===_e,onClick:function(){_e>1&&Oe((function(e){return e-1}))}},"Previous"),r.a.createElement("button",{className:"btn btn-primary width-94px",disabled:V&&V.length<20,onClick:function(){_e*Ye<1e3&&Oe((function(e){return e+1}))}},"Next")))))),r.a.createElement("div",{className:"#invoice"===at?"d-none":""},r.a.createElement($,{setactiveKey:nt,activeKey:at,customerid:Ae}))))),r.a.createElement(de,{customerData:Te,onEmailSave:Pt,setshowNoteModal:j,customerid:Ae,collapse:Ue,handleToggleCollapse:function(e){window.localStorage.setItem("customerCollapse",e),Ve(e)},setisinvoicelevelnote:F,customerReminder:Be,getCustomerReminder:_t,GetCustomerDetail:jt,notesUpdated:Me,setnotesUpdated:Se,customerCategoryList:Xe}))})),he=a(69),ge=a(504),ve=(a(236),a(68)),ye=a.n(ve),Ne=a(744),_e=a(745),Oe=a(25),je=a(501),De=a(502),Ye=a(509),we=function(e){function t(){return Object(F.a)(this,t),Object(B.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.isLoading;return r.a.createElement("div",null,r.a.createElement(C.n,{width:"100%",height:300},r.a.createElement(C.d,{width:600,height:300,data:t,margin:{right:60,left:0}},r.a.createElement(C.q,{tick:r.a.createElement(je.a,null),dataKey:"text"}),r.a.createElement(C.r,{tickFormatter:function(e){return Object(A.f)(e)}}),r.a.createElement(C.p,{cursor:!1,content:r.a.createElement(De.a,null)}),r.a.createElement(C.i,{wrapperStyle:{paddingLeft:"80px"}}),r.a.createElement(C.c,{dataKey:"paid",name:"Paid",stackId:"a",barWidth:"60",fill:"#7CB5EC"}),r.a.createElement(C.c,{dataKey:"l30",name:"< 30 days",stackId:"a",barWidth:"60",fill:"#75CF5B"}),r.a.createElement(C.c,{dataKey:"g30",name:"> 30 days",stackId:"a",barWidth:"60",fill:"#F4A160"}))),a?r.a.createElement("div",{className:"graph-loader"},r.a.createElement("div",{className:"spinner-border"})):null)}}]),t}(r.a.PureComponent);var xe=function(e){var t=e.setactiveKey,a=Object(c.useState)([]),l=Object(n.a)(a,2),o=l[0],s=l[1],u=Object(c.useState)("30days"),m=Object(n.a)(u,2),d=m[0],f=m[1],p=Object(c.useState)(w()().subtract("days",30).format("MM/DD/YYYY")),b=Object(n.a)(p,2),E=b[0],h=b[1],g=Object(c.useState)(w()().format("MM/DD/YYYY")),v=Object(n.a)(g,2),y=v[0],N=(v[1],Object(c.useState)(!0)),_=Object(n.a)(N,2),j=_[0],Y=_[1];Object(c.useEffect)((function(){x(E,y)}),[E,y]);var x=function(t,a){var n,c,r;Y(!0);var l=Object(Ye.b)(t,a,d),o=l,u=[];l.forEach((function(e,t){u.push(T.c.get("arinvoice/total?status=all&category=2&from_date='".concat(e.start,"'&to_date='").concat(e.end,"'")))})),Promise.all(u).then((function(t){o=o.map((function(e,a){return Object(i.a)({},e,{l30:D()(t[a],"data.total",0)})})),(n=!0)&&c&&r&&s(o),Y(!1),e.setPaymentGraphLoading(!1)})).catch((function(e){return Object(O.a)(e)}));var m=[];l.forEach((function(e,t){m.push(T.c.get("arinvoice/total?status=all&category=4&from_date='".concat(e.start,"'&to_date='").concat(e.end,"'")))})),Promise.all(m).then((function(e){o=o.map((function(t,a){return Object(i.a)({},t,{g30:D()(e[a],"data.total",0)})})),c=!0,n&&c&&r&&s(o),Y(!1)})).catch((function(e){return Object(O.a)(e)}));var f=[];l.forEach((function(e,t){f.push(T.c.get("arinvoice/total?status=closed&from_date='".concat(e.start,"'&to_date='").concat(e.end,"'")))})),Promise.all(f).then((function(e){o=o.map((function(t,a){return Object(i.a)({},t,{paid:D()(e[a],"data.total",0)})})),r=!0,n&&c&&r&&s(o),Y(!1)})).catch((function(e){return Object(O.a)(e)}))};function M(e){switch(e){case"30days":h(w()().subtract(30,"days").format("MM/DD/YYYY"));break;case"6months":h(w()().subtract(3,"months").format("MM/DD/YYYY"));break;case"1year":h(w()().subtract(1,"years").format("MM/DD/YYYY"))}f(e)}return r.a.createElement("div",{className:"col-md-12",style:{overflowY:"auto"}},r.a.createElement("div",{className:""},t&&r.a.createElement("h1",{className:"custchattabhead"},"Total AR"),r.a.createElement("div",{className:" table100 pt-0"},r.a.createElement("div",{className:"row"}),r.a.createElement("div",{className:"custchattab1"},r.a.createElement("span",{onClick:function(){return M("1year")},className:"cursour-pointer ".concat("1year"===d&&"activec")},"Year"),r.a.createElement("span",{onClick:function(){return M("6months")},className:"cursour-pointer ".concat("6months"===d&&"activec")},"Quarter"),r.a.createElement("span",{onClick:function(){return M("30days")},className:"cursour-pointer ".concat("30days"===d&&"activec")},"Month")),r.a.createElement("div",{className:e.setactiveKey&&"cursour-pointer",onClick:function(){var t=e.setactiveKey;t&&t("payment")}},r.a.createElement(we,{data:o,isLoading:j})))))},Me=a(613),Se=function(e){var t=e.cx,a=e.cy,n=e.innerRadius,c=e.outerRadius,l=e.startAngle,o=e.endAngle,s=e.fill;return r.a.createElement("g",null,r.a.createElement(C.o,{className:"cursour-pointer",cx:t,cy:a,innerRadius:n,outerRadius:c+5,startAngle:l,endAngle:o,fill:s}))},ke=function(e){var t=e.data,a=void 0===t?[]:t,l=(e.vendorData,e.onRecordClick),o=e.total,s=void 0===o?0:o,i=e.selectedSection,u=e.fullsize,m=Object(c.useState)(null),d=Object(n.a)(m,2),f=d[0],p=d[1],b=Object(_.c)(),E=Object(n.a)(b,2),h=E[0];E[1];function g(e,t){p(t)}function v(e,t){p(D()(i,"dataindex",null))}return Object(c.useEffect)((function(){(D()(i,"dataindex",null)||0===D()(i,"dataindex",null))&&p(D()(i,"dataindex",null))}),[i]),s&&(h>1260||u?r.a.createElement(C.n,{height:320,width:320},r.a.createElement(C.m,null,r.a.createElement(C.l,{animationDuration:1e3,activeIndex:f,activeShape:Se,data:a,innerRadius:60,outerRadius:140,fill:"#8884d8",dataKey:"value",onClick:function(e){return l(e.payload.payload)},onMouseEnter:g,onMouseLeave:v},r.a.createElement(C.g,{className:"cursour-pointer",width:30,position:"center",onClick:function(){return l(null)}},"Totaly ".concat(Object(A.f)(s)||"-")),a.map((function(e,t){return r.a.createElement(C.e,{key:e,className:"cursour-pointer",fill:Ce[e.dataindex%Ce.length]})}))))):r.a.createElement(C.n,{height:320,width:320},r.a.createElement(C.m,null,r.a.createElement(C.l,{animationDuration:1e3,activeIndex:f,activeShape:Se,data:a,innerRadius:50,outerRadius:120,fill:"#8884d8",dataKey:"value",onClick:function(e){return l(e.payload.payload)},onMouseEnter:g,onMouseLeave:v,label:function(e){return Object(A.f)(e.value)}},r.a.createElement(C.g,{className:"cursour-pointer",width:30,position:"center",onClick:function(){return l(null)}},"Total ".concat(Object(A.f)(s)||"-")),a.map((function(e,t){return r.a.createElement(C.e,{key:e,className:"cursour-pointer",fill:Ce[e.dataindex%Ce.length]})}))),r.a.createElement(C.i,{align:"center",verticalAlign:"bottom"}),!u&&h<=1260&&r.a.createElement(C.p,{content:r.a.createElement(Me.a,null)}))))},Ce=["#2B7EF6","#7CA82D","#EF853A","#DB504D","#424348","#90ED7D","#3C861F","#F9D7E0"],Ae=[{name:"Current",dataindex:0,from_date:w()().format("MM/DD/YYYY"),is_future:!0,to_date:w()().add("days",365).format("MM/DD/YYYY")},{name:"1-30 Days",dataindex:1,from_date:w()().subtract("days",30).format("MM/DD/YYYY"),to_date:w()().subtract("days",1).format("MM/DD/YYYY")},{name:"31-60 days",dataindex:2,from_date:w()().subtract("days",60).format("MM/DD/YYYY"),to_date:w()().subtract("days",31).format("MM/DD/YYYY")},{name:"61-90 days",dataindex:3,from_date:w()().subtract("days",90).format("MM/DD/YYYY"),to_date:w()().subtract("days",61).format("MM/DD/YYYY")},{name:"> 90 days",dataindex:4,is_past:!0,from_date:w()().subtract("days",365).format("MM/DD/YYYY"),to_date:w()().subtract("days",91).format("MM/DD/YYYY")}],Pe="",Re=function(e){var t=e.originalstartDate,a=e.originalendDate,l=e.showgraphs,o=e.setactiveKey,s=e.fullsize,u=Object(c.useState)(null),m=Object(n.a)(u,2),d=m[0],f=m[1],p=Object(c.useState)([]),b=Object(n.a)(p,2),E=b[0],v=b[1],y=Object(c.useState)(null),N=Object(n.a)(y,2),O=N[0],j=N[1],Y=Object(c.useState)(!1),x=Object(n.a)(Y,2),M=x[0],S=x[1],k=Object(_.c)(),C=Object(n.a)(k,2),R=C[0],I=(C[1],null);function F(){var e="arinvoice/total?status=open&from_date=".concat(t,"&to_date=").concat(a);if(e!==Pe){S(!1),j(null),v([]);var n=[];T.c.get(e).then((function(c){Pe=e,j(D()(c,"data.total","")),Ae.forEach((function(e,c){e.is_past&&(e.from_date=t),e.is_future&&(e.to_date=a);var r=Object(P.a)({startdate:w()(e.from_date,"MM/DD/YYYY"),enddate:w()(t,"MM/DD/YYYY")});r=r>0?r:0;var l=Object(P.a)({startdate:w()(e.from_date,"MM/DD/YYYY"),enddate:w()(a,"MM/DD/YYYY")}),o=Object(P.a)({startdate:w()(t,"MM/DD/YYYY"),enddate:w()(e.to_date,"MM/DD/YYYY")}),s=Object(P.a)({startdate:w()(a,"MM/DD/YYYY"),enddate:w()(e.to_date,"MM/DD/YYYY")});if(s=s>0?s:0,!(l<0||o<0)){var u=w()(e.from_date,"MM/DD/YYYY").add("days",r).format("MM/DD/YYYY"),m=w()(e.to_date,"MM/DD/YYYY").subtract("days",s).format("MM/DD/YYYY");n.push(Object(i.a)({},e,{from_date:e.is_past?t:u,to_date:e.is_future?a:m}))}}));Promise.all(n.map((function(e){return T.c.get("arinvoice/total?status=open".concat(e.from_date&&"&from_date=".concat(e.from_date)).concat(e.to_date&&"&to_date=".concat(e.to_date)))}))).then((function(e){v(n.map((function(t,a){return Object(i.a)({},t,{value:D()(e,"[".concat(a,"].data.total"),0),color:Ce[a%Ce.length],name:t.is_future?s?"".concat(w()(t.from_date,"MM/DD/YYYY").format("MM/DD/YYYY")===w()().format("MM/DD/YYYY")?"Today":w()(t.from_date,"MM/DD/YYYY").format("MMM DD, Y")," ").concat(w()(t.to_date).format("MM/DD/YY")!==w()().format("MM/DD/YY")?"- ".concat(w()(t.to_date).format("MMM DD, Y")):""):"Due":t.is_past?t.name:"Past ".concat(Object(P.a)({startdate:w()(t.to_date),enddate:w()()})," - ").concat(Object(P.a)({startdate:w()(t.from_date),enddate:w()()})," Days ")})}))),S(!0),f(null)})).catch((function(e){S(!0)}))}))}}function L(t,a,n){e.setstartDate&&s&&(e.setstartDate(t),e.setendDate(a),e.setpage(1),f(n))}return Object(c.useEffect)((function(){if(l&&t&&a)return I&&clearTimeout(I),I=setTimeout(F,200),function(){Pe=""}}),[t,a,l]),r.a.createElement("div",{className:"col-md-12",style:{height:"100vh"}},r.a.createElement("div",{className:""},o&&r.a.createElement("h1",{className:"custchattabhead"},"AR aging"),r.a.createElement("div",{className:"table100 pt-1"},R>1260&&r.a.createElement("div",{class:"custchattab1 text-center w-100"}),r.a.createElement("div",{className:e.setactiveKey&&"cursour-pointer",onClick:function(){var t=e.setactiveKey;t&&t("araging")}},M?O?r.a.createElement("div",{className:"col-md-12 d-flex justify-content-center text-left"},r.a.createElement("span",{className:"ml-3"},r.a.createElement(ke,{onRecordClick:function(e){L(D()(e,"from_date",t),D()(e,"to_date",a),e)},data:E,total:O,selectedSection:d,fullsize:e.fullsize})),(R>1260||e.fullsize)&&r.a.createElement("span",{className:"mt-4 ".concat(s?"ml-4":"")},r.a.createElement("div",{className:"bg-light-grey ml-2 pl-3 py-2 px-1"},r.a.createElement("span",{onClick:function(){L(t,a,null)}},"".concat(w()(t,"MM/DD/YYYY").format("MMM DD, Y")," - ").concat(w()(a,"MM/DD/YYYY").format("MMM DD, Y")))),E.map((function(e,t){return r.a.createElement("div",{className:"col-md-12 py-2 px-1 text-truncate"},r.a.createElement("span",{className:"ml-1 mr-1 donutchart-legend-dot",style:{backgroundColor:"".concat(D()(e,"line-color",Ce[e.dataindex%8]))}}),r.a.createElement("span",{className:"cursour-pointer",onClick:function(){L(e.from_date,e.to_date,e)}},"".concat(D()(e,"name","-")," ")," (",Object(A.c)(D()(e,"value",0)),")"))})))):r.a.createElement(h.a,null):r.a.createElement(g.a,null)))))},Te=function(e){var t=e.loadCustomerList,a=Object(c.useState)(!0),l=Object(n.a)(a,2),o=l[0],s=l[1],i=Object(c.useState)(!0),u=Object(n.a)(i,2),m=u[0],d=u[1];return Object(c.useEffect)((function(){o||m||t(!0)}),[o,m]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"graphbg"},r.a.createElement("div",{className:"graph1"}),r.a.createElement("div",{id:"container1",style:{minWidth:"310px",height:420,margin:"0px auto",width:"100%"},"data-highcharts-chart":0},r.a.createElement(xe,Object.assign({},e,{setPaymentGraphLoading:s}))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{classname:"graphbg"},r.a.createElement("div",{className:"graph1"}),r.a.createElement("div",{id:"container1",style:{minWidth:"310px",height:420,margin:"0px auto",width:"100%",overflow:"hidden"},"data-highcharts-chart":0},r.a.createElement(Re,Object.assign({},e,{setInvoiceGraphLoading:d,setstartDate:e.setstartDate,setendDate:e.setendDate,setpage:e.setpage,resetFilter:e.resetFilter,originalstartDate:e.originalstartDate,originalendDate:e.originalendDate}))))))},Ie="",Fe=!1,Le=Object(l.b)((function(e){return{}}),{})((function(e){var t=e.props,a=(e.history,e.changeSelection),l=Object(c.useState)([]),o=Object(n.a)(l,2),s=o[0],m=o[1],d=Object(c.useState)(!1),p=Object(n.a)(d,2),b=p[0],E=p[1],h=Object(c.useState)([]),g=Object(n.a)(h,2),v=g[0],y=g[1],_=Object(c.useState)(),j=Object(n.a)(_,2),Y=j[0],x=j[1],M=Object(c.useState)(!1),C=Object(n.a)(M,2),I=C[0],F=C[1],L=Object(c.useState)(!1),B=Object(n.a)(L,2),K=B[0],H=B[1],z=Object(c.useState)(!0),U=Object(n.a)(z,2),W=U[0],Q=U[1],q=Object(c.useState)(!1),J=Object(n.a)(q,2),G=(J[0],J[1]),Z=Object(c.useState)(w()().subtract(365,"days").format("MM/DD/YYYY")),X=Object(n.a)(Z,2),$=X[0],ee=X[1],te=Object(c.useState)(w()().subtract(365,"days").format("MM/DD/YYYY")),ae=Object(n.a)(te,2),ne=ae[0],ce=ae[1],re=Object(c.useState)(w()().add(365,"days").format("MM/DD/YYYY")),le=Object(n.a)(re,2),oe=le[0],se=le[1],ie=Object(c.useState)(w()().add(365,"days").format("MM/DD/YYYY")),ue=Object(n.a)(ie,2),me=ue[0],de=ue[1],fe=Object(c.useState)(!1),pe=Object(n.a)(fe,2),be=pe[0],Ee=pe[1],ve=Object(c.useState)(30),je=Object(n.a)(ve,2),De=(je[0],je[1]),Ye=Object(c.useState)([]),we=Object(n.a)(Ye,2),Me=we[0],Se=we[1],ke=Object(c.useState)(null),Ce=Object(n.a)(ke,2),Ae=Ce[0],Pe=Ce[1],Le=Object(c.useState)(20),Be=Object(n.a)(Le,2),Ke=Be[0],He=Be[1],ze=Object(c.useState)("total_amount_due"),Ue=Object(n.a)(ze,2),Ve=Ue[0],We=Ue[1],Qe=Object(c.useState)("desc"),qe=Object(n.a)(Qe,2),Je=qe[0],Ge=qe[1],Ze=Object(c.useState)(""),Xe=Object(n.a)(Ze,2),$e=Xe[0],et=Xe[1],tt=Object(c.useState)(!1),at=Object(n.a)(tt,2),nt=at[0],ct=at[1],rt=Object(c.useState)(!1),lt=Object(n.a)(rt,2),ot=lt[0],st=lt[1],it=Object(c.useState)(localStorage.getItem("customer_activeTab")),ut=Object(n.a)(it,2),mt=ut[0],dt=ut[1],ft=w()().format("MM/DD/YYYY"),pt=w()().subtract(1,"days").format("MM/DD/YYYY"),bt=Object(c.useRef)(null),Et=mt&&"null"!=mt;function ht(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="&status=open".concat(e&&"&page=".concat(Ae,"&per_page=").concat(Ke));return D()(Y,"id",$e)?t+="&customer_id=".concat(D()(Y,"id",$e)):($&&(t+="&from_date=".concat($)),oe&&(t+="&to_date=".concat(oe))),Ve&&(t+="&sort_by=".concat(Ve,"&sort_order=").concat(Je)),t}Object(c.useEffect)((function(){window.scrollTo(0,0);var e=localStorage.getItem("customersFilters");return e?(e=e.split("&").filter((function(e){return e})).map((function(e){return e.split("=")}))).forEach((function(e){"per_page"===e[0]&&He(e[1]),"sort_by"===e[0]&&We(e[1]),"sort_order"===e[0]&&Ge(e[1]),"id"===e[0]&&et(e[1]),"from_date"===e[0]&&ee(e[1]),"to_date"===e[0]&&se(e[1]),"from_date"===e[0]&&ce(e[1]),"to_date"===e[0]&&de(e[1]),"page"===e[0]&&Pe(e[1])})):Pe(1),function(){Ie=""}}),[]),Object(c.useEffect)((function(){!b&&Ae&&(!function(e){var t="arinvoice/grouped?".concat(e);if(Ie===t)return;Ie=t,Q(!0),m([]),T.c.get(t).then((function(t){be&&(de(null),ce($),de(oe),Ee(!1),localStorage.setItem("customersFilters",e.split("&").filter((function(e){return e})).map((function(e){return e.split("=")})).map((function(e){return["from_date"].includes(e[1])?[e[0],$]:e})).map((function(e){return["to_date"].includes(e[1])?[e[0],oe]:e})).map((function(e){return e.join("=")})).join("&")));var a=D()(t,"data.result",[]).map((function(e){return Object(i.a)({},D()(t,"data.detail",{}),{},e,{amount_due:"",amount_not_due:""})})),n=Object(u.a)(a),c=Object(P.a)({startdate:w()($),enddate:w()(pt)})>=0,r=Object(P.a)({startdate:w()(ft),enddate:w()(oe)})>=0,l=c?[$,r?pt:oe]:[null,null],o=r?[c?ft:$,oe]:[null,null],s=!l[0],d=!o[0];function f(){s&&d&&(m(n),Q(!1))}l[0]&&Promise.all(a.map((function(e){return T.c.get("arinvoice/grouped?status=open&customer_id=".concat(e.customer_id,"&from_date=").concat(l[0],"&to_date=").concat(l[1]))}))).then((function(e){n=a.map((function(t,a){return Object(i.a)({},t,{amount_due:D()(e,"[".concat(a,"].data.result[0].total_amount_due"),"")})})),s=!0,f()})),o[0]&&Promise.all(a.map((function(e){return T.c.get("arinvoice/grouped?status=open&customer_id=".concat(e.customer_id,"&from_date=").concat(o[0],"&to_date=").concat(o[1]))}))).then((function(e){n=n.map((function(t,a){return Object(i.a)({},t,{amount_not_due:D()(e,"[".concat(a,"].data.result[0].total_amount_due"),"")})})),d=!0,f()}))})).catch((function(e){return Object(O.a)(e)}))}(ht()),st(!0))}),[Ae,Ke,Y,b,Ve,Je,$e,$,oe]),Object(c.useEffect)((function(){localStorage.setItem("customer_activeTab",mt),window.scrollTo(0,0)}),[mt]);function gt(e){return e.length?e.map((function(e){return{Customer:D()(e,"name",""),"Amount not due":Object(A.b)(D()(e,"amount_not_due",0)),"Amount due":Object(A.b)(D()(e,"amount_due",0)),"Total balance":Object(A.b)(D()(e,"total_amount_due",0)),"Avg days late":D()(e,"average_days_late",""),"Weighted(avg) days late":D()(e,"weighted_avg_days_late",""),"Payment terms":"Net ".concat(D()(e,"terms","")||0)}})):[{Customer:"","Amount not due":"","Amount due":"","Total balance":"","Avg days late":"","Weighted(avg) days late":"","Payment terms":""}]}var vt=function(e){var t="arinvoice/grouped?".concat(ht(!1),"&per_page=1000");ct(!0),T.c.get(t).then((function(t){var a=D()(t,"data.result",[]).map((function(e){return Object(i.a)({},D()(t,"data.detail",{}),{},e,{amount_due:"",amount_not_due:""})})),n=Object(u.a)(a),c=Object(P.a)({startdate:w()($),enddate:w()(pt)})>=0,r=Object(P.a)({startdate:w()(ft),enddate:w()(oe)})>=0,l=c?[$,r?pt:oe]:[null,null],o=r?[c?ft:$,oe]:[null,null],s=!l[0],m=!o[0];function d(){s&&m&&(Se(n),ct(!1),!0===e?bt.current.link.click():(Se(n),function(e){var t="customer".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".xlsx"),a={Sheets:{data:R.utils.json_to_sheet(e)},SheetNames:["data"]},n=R.write(a,{bookType:"xlsx",type:"array"}),c=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});N.saveAs(c,t)}(gt(n))))}l[0]&&Promise.all(a.map((function(e){return T.c.get("arinvoice/grouped?status=open&customer_id=".concat(e.customer_id,"&from_date=").concat(l[0],"&to_date=").concat(l[1]))}))).then((function(e){n=a.map((function(t,a){return Object(i.a)({},t,{amount_due:D()(e,"[".concat(a,"].data.result[0].total_amount_due"),"")})})),s=!0,d()})),o[0]&&Promise.all(a.map((function(e){return T.c.get("arinvoice/grouped?status=open&customer_id=".concat(e.customer_id,"&from_date=").concat(o[0],"&to_date=").concat(o[1]))}))).then((function(e){n=n.map((function(t,a){return Object(i.a)({},t,{amount_not_due:D()(e,"[".concat(a,"].data.result[0].total_amount_due"),"")})})),m=!0,d()}))})).catch((function(e){return Object(O.a)(e)}))},yt=function(){E(!1),x(null),et(""),Pe(1),We("total_amount_due"),Ge("desc"),Ee(!0),de(null),ce(w()().subtract(365,"days").format("MM/DD/YYYY")),de(w()().add(365,"days").format("MM/DD/YYYY")),ee(w()().subtract(365,"days").format("MM/DD/YYYY")),se(w()().add(365,"days").format("MM/DD/YYYY")),De(30)},Nt=function(e){We(e),Ge(e===Ve&&"asc"===Je?"desc":"asc"),Pe(1),m([])},_t=Object(c.useRef)(V()((function(e){return function(e){e?(H(!0),T.c.get("customer/search?name=".concat(e,"&per_page=100")).then((function(e){y(e.data.result),H(!1)})).catch((function(e){return Object(O.a)(e)}))):x(null)}(e)}),500)).current,Ot=[{accessor:"name",Header:function(){return r.a.createElement("span",null,"Customer",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},Cell:function(e){return r.a.createElement("span",{onClick:function(e){e.stopPropagation()}},r.a.createElement(Oe.b,{to:"customers/".concat(e.original.customer_id)},r.a.createElement("span",{className:"ml-3"},e.value)))}},{Header:function(){return r.a.createElement("div",{className:"text-right"},"Amount not due",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"amount_not_due",className:"text-right pr-2",Cell:function(e){return r.a.createElement("span",{className:"text-right"},r.a.createElement("span",{className:"ml-3"},Object(A.c)(e.value)))}},{Header:function(){return r.a.createElement("div",{className:"text-right"},"Amount due",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"amount_due",className:"text-right pr-2",Cell:function(e){return r.a.createElement("span",{className:"text-right"},r.a.createElement("span",{className:"ml-3"},Object(A.c)(e.value)))}},{Header:function(){return r.a.createElement("div",{className:"text-right",onClick:function(){Nt("total_amount_due")}},"Total balance",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"total_amount_due",className:"text-right pr-2",Cell:function(e){return r.a.createElement("span",{className:"text-right"},r.a.createElement("span",{className:"ml-3"},Object(A.c)(e.value)))}},{Header:function(){return r.a.createElement("div",{className:"text-right",onClick:function(){Nt("average_days_late")}},"Avg days late",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"average_days_late",className:"text-right pr-2",Cell:function(e){return r.a.createElement("span",{className:"text-right"},r.a.createElement("span",{className:"ml-3"},Object(A.f)(e.value,!1)))}},{Header:function(){return r.a.createElement("div",{className:"text-center",onClick:function(){Nt("weighted_avg_days_late")}},"Weighted(avg) days late",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"weighted_avg_days_late",className:"text-center",Cell:function(e){return r.a.createElement("span",{className:"text-right"},r.a.createElement("span",{className:"ml-3"},Object(A.f)(e.value,!1)))}},{Header:function(){return r.a.createElement("div",{className:"text-center"},"Payment terms",r.a.createElement("span",{className:"sort-icons"},r.a.createElement("i",{className:"fas fa-caret-up"}),r.a.createElement("i",{className:"fas fa-caret-down"})))},accessor:"terms",className:"text-center",Cell:function(e){return r.a.createElement("span",null,r.a.createElement("span",{className:"ml-3"},"Net ".concat(Object(A.f)(e.value,!1)||0)))}}],jt=Object(i.a)({},t,{loadCustomerList:G,originalstartDate:ne,originalendDate:me,setstartDate:ee,setendDate:se,setpage:Pe,resetFilter:yt,showgraphs:ot});return r.a.createElement("div",{className:"row px-15 ",id:"dashboardBody"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:Et?"":"d-none"},r.a.createElement("span",{onClick:function(){dt("")},className:"pull-left pt-2 pr-3",title:"Back"},r.a.createElement("i",{className:"fa fa-arrow-left",style:{color:"#ddd",marginRight:"5px",ariaHidden:!0,cursor:"pointer"}})),r.a.createElement(Ne.a,{id:"graphs",activeKey:mt,onSelect:function(e){return dt(e)}},r.a.createElement(_e.a,{eventKey:"payment",title:"Total AR"},r.a.createElement("div",{className:"w-50 text-center",style:{minWidth:"310px",height:380,margin:"0px auto"}},r.a.createElement(xe,Object.assign({fullsize:!0},jt)))),r.a.createElement(_e.a,{eventKey:"araging",title:"AR aging"},r.a.createElement("div",{className:"w-50 text-center",style:{minWidth:"310px",height:380,margin:"0px auto"}},r.a.createElement(Re,Object.assign({fullsize:!0},jt)))))),r.a.createElement("div",{className:Et?"d-none":""},r.a.createElement(Te,Object.assign({},jt,{setactiveKey:dt}))))),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"dropdown",style:{margin:"0px"}},r.a.createElement("span",{className:"btn dropdown-toggle btn-primary","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return E(!0)}},r.a.createElement("i",{className:"fa fa-sliders","aria-hidden":"true"}),"\xa0 Filter"),b&&r.a.createElement(f.a,{onClickAway:function(){Fe&&(ee(ne),se(me)),E(!1),Fe=!1}},r.a.createElement("div",{id:"outerside",className:"dropdown-menu filterdroplist p-2 ".concat(b&&"show"),"aria-labelledby":"dropdownMenuLink"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",null,r.a.createElement("label",{className:""},"Customer Name"),r.a.createElement(he.a,{suggestions:ye()(v.map((function(e){return{id:e.id,name:e.name}})),"id"),getSelected:function(e){return x(e)},search:function(e){return _t(e,"customer")},isLoading:K,defaultValue:Y&&Y.name})))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Due date"),r.a.createElement("div",{className:"single-date-picker",style:{fontSize:12,overflow:"hidden"}},r.a.createElement(ge.a,{startDate:w()($),endDate:w()(oe),getSelectedDates:function(e,t,a){ee(w()(e).format("MM/DD/YYYY")),se(w()(t).format("MM/DD/YYYY")),Ee(!0),De(a),Fe=!0},parentEl:"#outerside"})))),r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"setbtn"},r.a.createElement("button",{type:"reset",className:"btn resetbtn btn-light",onClick:yt},"Reset"),r.a.createElement("button",{type:"submit",className:"btn applybtn btn-primary",onClick:function(){D()(Y,"id",$e)?window.open("".concat(window.location.origin,"/customers/").concat(D()(Y,"id",$e)),"_self"):(Pe(1),E(!1))}},"Submit")))))))),r.a.createElement("div",{className:"col-md-6",style:{textAlign:"right"}},r.a.createElement("div",{className:"dropdown"},r.a.createElement("span",{className:"btn dropdown-toggle btn-primary",role:"button",id:"","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return F(!0)}},"Export ",nt&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"})),r.a.createElement(f.a,{onClickAway:F},r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right payexpdroplist ".concat(I&&"show"),"aria-labelledby":"dropdownMenuLink",id:""},r.a.createElement(S.CSVLink,{data:gt(Me),ref:bt,filename:"customers_".concat(w()().format("MMMM Do YYYY-h:mm:ss-a"),".csv"),style:{display:"none"}}),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",marginBottom:"10px",cursor:"pointer"},onClick:function(){return vt(!0)}},"Export CSV"),r.a.createElement("span",{style:{fontSize:12,display:"block",textAlign:"right",marginRight:"10px",cursor:"pointer"},onClick:vt},"Export Excel")))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(k.a,{noDataText:W?"":"No data found",minRows:s.length||1,loading:W,sortable:!0,resizable:!0,showPagination:!1,columns:Ot,data:s,defaultSorted:[{id:Ve,desc:"desc"===Je}],getTrProps:function(e,t,n){return{onClick:function(e){return a(t.original)}}}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"filterthree"},r.a.createElement("div",{className:"pull-right"},r.a.createElement("button",{className:"btn btn-primary mr-2 width-94px",disabled:1===Ae||!Ae,onClick:function(){Ae>1&&(Q(!0),Pe((function(e){return Number(e)-1})))}},"Previous"),r.a.createElement("button",{className:"btn btn-primary width-94px",disabled:s&&20!==s.length,onClick:function(){Q(!0),Pe((function(e){return Number(e)+1}))}},"Next"))))))))}));t.default=Object(o.g)(Object(l.b)((function(e){return{login:e.payables}}),{})((function(e){document.title="Customers - Payference";var t=e.history,a=e.match,l=Object(c.useState)(null),i=Object(n.a)(l,2),u=i[0],m=i[1];function d(e){m(e),t.push("customers/".concat(e.customer_id))}return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/customers/payments",component:function(){return r.a.createElement(s.a,e)}}),r.a.createElement(o.b,{path:"/customers/:id",component:function(){return r.a.createElement(Ee,Object.assign({},e,{selectedpayment:u}))}}),r.a.createElement(o.b,{path:"".concat(a.path),component:function(){return r.a.createElement(Le,Object.assign({},e,{changeSelection:d}))}}))})))}}]);
//# sourceMappingURL=20.a99612cd.chunk.js.map